<!DOCTYPE html>
<html lang="en">
<head>
  <meta name="generator" content="HTML Tidy for HTML5 for Linux version 5.8.0">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="../assets/usage.css">
  <title>Cutting and Bordering -- ImageMagick Examples</title>
  <link rel="icon" href="../img_www/favicon.ico" type="image/x-icon">
  <link rel="shortcut" href="../img_www/favicon.ico" type="image/x-icon">
  <link rel="canonical" href="https://imagemagick.org/Usage/crop/">
</head>
<body>
  <main class="container">
    <div class="magick-template">
      <div class="magick-header">
        <h1>ImageMagick Examples --<br>
        <img src="../img_www/space.gif" width="50" height="1"> Cutting and Bordering</h1>
        <div>
          <dl>
            <dt><b>Index</b></dt>
            <dt>
              <a href="../"><img src="../img_www/granitesm_left.gif" border="0" width="15" height="15"> ImageMagick Examples Preface and Index</a>
            </dt>
            <dd>
              <a href="#crop"><img src="../img_www/granitesm_right.gif" border="0" width="15" height="15"> Crop (cutting up images in a free form way)</a>
              <ul>
                <li>
                  <a href="#crop">The basic crop operator</a>
                </li>
                <li>
                  <a href="#crop_missed">The Missed Image (from a bad crop)</a>
                </li>
                <li>
                  <a href="#crop_page">Crop an Image with Existing Virtual Canvas</a>
                </li>
                <li>
                  <a href="#crop_repage">Removing Virtual Canvas from Results</a> using +repage <b>***</b>
                </li>
                <li>
                  <a href="#crop_viewport">Viewport Crop with Virtual Canvas Adjustments</a>
                </li>
                <li>
                  <a href="#crop_gravity">Crop Relative to Gravity</a>
                </li>
                <li>
                  <a href="#crop_percent">Crop a Percentage of an Image</a>
                </li>
                <li>
                  <a href="#crop_tile">Tile Cropping, sub-dividing one image into multiple images</a>
                </li>
                <li>
                  <a href="#crop_tile_centered">Centered Tile Cropping, leaving remainders around the edge</a>
                </li>
                <li>
                  <a href="#crop_strip">Strip Cropping, cropping out rows and columns</a>
                </li>
                <li>
                  <a href="#crop_quad">Quadrants, cutting around a single point</a>
                </li>
                <li>
                  <a href="#crop_neg_offset">Using Negative Offsets, remove bottom or left edge</a>
                </li>
                <li>
                  <a href="#crop_equal">Cropping into roughly Equally Sized Divisions</a>
                </li>
                <li>
                  <a href="#crop_spaced">Separating Spaced-out Tiling Images</a>
                </li>
              </ul>
            </dd>
            <dd>
              <a href="#border"><img src="../img_www/granitesm_right.gif" border="0" width="15" height="15"> Adding/Removing Image Edges</a>
              <ul>
                <li>
                  <a href="#border">Border, adding space around the edge of an image</a>
                </li>
                <li>
                  <a href="#frame">Frame, adding 3D-like borders to images</a>
                </li>
                <li>
                  <a href="#shave">Shave, removing the edges from images</a>
                </li>
                <li>
                  <a href="#extent">Extent, direct image size adjustment</a>
                </li>
              </ul>
            </dd>
            <dd>
              <a href="#splice"><img src="../img_www/granitesm_right.gif" border="0" width="15" height="15"> Adding/Removing Rows, Columns and Edges</a>
              <ul>
                <li>
                  <a href="#splice">Splice, adding a row, column or edge</a>
                </li>
                <li>
                  <a href="#chop">Chop, removing a row, column or edge</a>
                </li>
              </ul>
            </dd>
            <dd>
              <a href="#advanced"><img src="../img_www/granitesm_right.gif" border="0" width="15" height="15"> Advanced Cropping Techniques</a>
              <ul>
                <li>
                  <a href="#crop_aspect">Crop to a Given Aspect Ratio</a>
                </li>
              </ul>
            </dd>
            <dd>
              <a href="#trim"><img src="../img_www/granitesm_right.gif" border="0" width="15" height="15"> Trim, the 'Auto-Crop' Operator</a>
              <ul>
                <li>
                  <a href="#trim">Using Trim</a>
                </li>
                <li>
                  <a href="#trim_color">Trimming with a Specific Color</a>
                </li>
                <li>
                  <a href="#trim_oneside">Trimming just One Side of an Image</a>
                </li>
                <li>
                  <a href="#trim_fuzz">Trimming 'Fuzzy' Images</a> -- Low Quality JPEG Images
                </li>
                <li>
                  <a href="#trim_noisy">Trimming 'Noisy' Images</a> -- Scanned or Video Images
                </li>
              </ul>
            </dd>
          </dl>Here we explore the ImageMagick operations which allow you to put your images under the knife, and add frames and borders around the image. That is, we look at operations which Changes an image's size, without scaling the image content. You may think this is a simple operation and it is. So simple, that IM provides a huge number of ways and methods of actually doing this task. So many that I needed to give it its own page of examples just to demonstrate them all.
          <hr>
          <!-- ---------------------------------------------------------------- -->
          <a name="crop" id="crop"></a>
          <h2>Crop <font size="3">(cutting images down to size)</font></h2>
          <h3>Crop and Canvas Page</h3>The "<code><a href="../option_link.cgi?crop">-crop</a></code>" image operator will simply cut out the part of all the images in the current sequence at the size and position you specify by its geometry argument.
          <div align="center">
            <table class="table table-sm table-hover table-striped" cellspacing="0" cellpadding="5" width="90%" bgcolor="#F8F8F8">
              <tr>
                <td>
                  <pre class="bg-light text-dark mx-4"><samp>
  magick rose:                   rose.gif
  magick rose: -crop 40x30+10+10  crop.gif
  magick rose: -crop 40x30+40+30  crop_br.gif
  magick rose: -crop 40x30-10-10  crop_tl.gif
  magick rose: -crop 90x60-10-10  crop_all.gif
</samp><code execute="" err="crop_error.txt">  magick rose: -crop 40x30+90+60  crop_miss.gif
</code></pre>
                </td>
              </tr>
            </table><a href="rose.gif"><img src="rose.gif" width="70" height="46" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a> <img src="../img_www/right.gif" width="20" height="20" align="middle" alt="==&gt;"> <a href="crop.gif"><img src="crop.gif" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a> <a href="crop_br.gif"><img src="crop_br.gif" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a> <a href="crop_tl.gif"><img src="crop_tl.gif" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a> <a href="crop_all.gif"><img src="crop_all.gif" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a> <a href="crop_miss.gif"><img src="crop_miss.gif" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a>
          </div>Just so you can check on exactly what happened here is output from "<code>magick identify</code>" on the results of the crop above.
          <div align="center">
            <table class="table table-sm table-hover table-striped" cellspacing="0" cellpadding="5" width="90%" bgcolor="#F8F8F8">
              <tr>
                <td>
                  <pre><code execute="" nowarn="" out="crop_indent.txt">
  magick identify rose: crop.gif crop_br.gif crop_tl.gif \
                 crop_all.gif crop_miss.gif
</code></pre>
                </td>
              </tr>
            </table>
            <table border="0" cellspacing="0" cellpadding="5" width="90%" bgcolor="#F8F8F8">
              <tr>
                <td>
                  <a href="crop_indent.txt"><img src="crop_indent.txt.gif" align="middle" vspace="0" hspace="0" border="0" alt="[IM Text]"></a>
                </td>
              </tr>
            </table>
          </div>Notice that the size of the displayed image (its <a href="../basics/#virtual_canvas">Virtual Canvas</a>) has not been effected by the "<code><a href="../option_link.cgi?crop">-crop</a></code>" operation. The actual image itself has been cropped, and may be smaller, but the canvas on which the GIF image is displayed is still the same size as the original canvas. You will also notice that the size of the actual image produces may not be the actual size you requested from the crop. It could be very much smaller that what you expected, as the crop itself was either partially or fully outside the actual image area being cropped. You will also notice that the 'offset' of the image on the <a href="../basics/#virtual_canvas">Virtual Canvas</a> was in many cases also changed so that the pixels of cropped image is still in exactly the same position as they were in the original image. That is, the image contents itself does not move, even though the actual image itself is smaller. This means if you now modify the smaller image, then overlay the image (using <a href="../layers/#flatten">image layering operators</a> back over the original, it will fit back exactly where the sub-image originally came from. That is, IM retains the 'virtual canvas', 'page', or 'layering' information of the image so as to preserve it for later use. This is especially important for the correct working for GIF animation handling. For more information on this see. <a href="../anim_basics/#deconstruct">Deconstruct GIF Animations</a>.
          <table border="0" cellspacing="0" cellpadding="0" width="90%" align="center">
            <tr valign="top">
              <td><img src="../img_www/reminder.gif" width="20" height="16"><img src="../img_www/space.gif" width="20" height="16"></td>
              <td align="justify" width="100%"><font size="-1"><i>GIF images make active use of the 'page' or 'virtual canvas', size and offset information in images cropped by IM. If you don't want this information remove it with "<code><a href="../option_link.cgi?repage">+repage</a></code>" immediately after the "<code><a href="../option_link.cgi?crop">-crop</a></code>".<br>
              <br>
              Note that many image formats don't save this virtual page/canvas information information, so saving to such formats automatically removes it. JPEG is a typical example of a format that removes this info.<br>
              <br>
              The PNG format doesn't make much use of page/canvas info (except in the multi-png (MNG) format) but it does saves the page offset information (even negative offsets). IM will also add a small amount of meta-data to preserve the virtual canvas size for later use by other IM commands.<br>
              <br>
              Because of this preservation, I strongly recommend you still apply a "<code><a href="../option_link.cgi?repage">+repage</a></code>" even when saving to JPEG or other page-less image format when you will not need that information, as a pre-caution, and to make it obvious you don't what it.<br>
              <br></i></font></td>
            </tr>
          </table>
          <p>Note, the behavior of cropping can be affected by these defines:</p>
          <div class="table-responsive" style="font-size:smaller !important;">
            <table class="table table-sm table-hover table-striped">
              <tr>
                <td>trim:percent-background=<var>X%</var></td>
                <td>Set the amount of background that is tolerated in an edge. It is specified as a percent. 0% means no background is tolerated. 50% means an edge can contain up to 50% pixels that are background per the fuzz-factor.</td>
              </tr>
              <tr>
                <td>trim:edges={<var>north,east,south,west</var>}</td>
                <td>Only trim the specified edges of the image.</td>
              </tr>
              <tr>
                <td>trim:minSize=<var>geometry</var></td>
                <td>Limit the trim to the specified size.</td>
              </tr>
              <tr>
                <td>type:features=<var>string</var></td>
                <td>Add a font feature to be used by the RAQM delegate during complex text layout. This is usually used to turn on optional font features that are not enabled by default, but can be also used to turn off default font features. Features include those to control kerning, ligature and Arabic.</td>
              </tr>
              <tr>
                <td>type:hinting=<var>false</var></td>
                <td>Disable font hinting. Proper glyph rendering needs the scaled points to be aligned along the target device pixel grid, through an operation often called hinting. One of its main purposes is to ensure that important widths and heights are respected throughout the whole font. (For example, it is very often desirable that the ‘I’ and the ‘T’ glyphs have their central vertical line of the same pixel width. Hinting also manages features like stems and overshoots, which can cause problems at small pixel sizes.</td>
              </tr>
            </table>
          </div><a name="missed" id="missed"></a> <a name="crop_missed" id="crop_missed"></a>
          <h3>The Missed Image (from a bad crop)</h3>The last image in the above example (EG: "<code>crop_miss.gif</code>") also produced special empty image. Such images can be produced by operations such as <a href="#crop">Crop</a>, <a href="#trim">Trim</a>, <a href="../anim_basics/#compare">Layer Comparison</a>, and even <a href="../anim_opt/#optframe">GIF Animation Optimizations</a>, that generate empty or non-sensible results. For example in the previous example above, the "<code><a href="../option_link.cgi?crop">-crop</a></code>" operation missed the actual image it was cropping, so it produced this special 'missed' image, as well as some informational warning messages...
          <div align="center">
            <table border="0" cellspacing="0" cellpadding="5" width="90%" bgcolor="#F8F8F8">
              <tr>
                <td>
                  <a href="crop_error.txt"><img src="crop_error.txt.gif" align="middle" vspace="0" hspace="0" border="0" alt="[IM Text]"></a>
                </td>
              </tr>
            </table>
          </div>The output image, or 'missed' image, is a minimal image, one pixel in size at a 0 offset, but with original images page or canvas size, as well as any other meta-data the image may have associated. Here it represents the 'empty' or 'zero sized' image that should have been returned by "<code><a href="../option_link.cgi?crop">-crop</a></code>", but as no image format can output an image of 'zero' dimensions, a single transparent pixel image is used instead. Just so you can see more clearly, here is the "<code><a href="../basics/#identify">identify</a></code>" output of the missed image, as well as a 'IM pixel enumeration' of that single pixel image, showing that it only contains one single transparent pixel.
          <div align="center">
            <table class="table table-sm table-hover table-striped" cellspacing="0" cellpadding="5" width="90%" bgcolor="#F8F8F8">
              <tr>
                <td>
                  <pre><code execute="" nowarn="" out="crop_miss_ident.txt">
  magick identify crop_miss.gif
</code></pre>
                </td>
              </tr>
            </table>
            <table border="0" cellspacing="0" cellpadding="5" width="90%" bgcolor="#F8F8F8">
              <tr>
                <td>
                  <a href="crop_miss_ident.txt"><img src="crop_miss_ident.txt.gif" align="middle" vspace="0" hspace="0" border="0" alt="[IM Text]"></a>
                </td>
              </tr>
            </table>
            <table class="table table-sm table-hover table-striped" cellspacing="0" cellpadding="5" width="90%" bgcolor="#F8F8F8">
              <tr>
                <td>
                  <pre class="bg-light text-dark mx-4"><samp>
  magick crop_miss.gif  crop_miss_data.txt
</samp></pre>
                </td>
              </tr>
            </table>
            <table border="0" cellspacing="0" cellpadding="5" width="90%" bgcolor="#F8F8F8">
              <tr>
                <td>
                  <a href="crop_miss_data.txt"><img src="crop_miss_data.txt.gif" align="middle" vspace="0" hspace="0" border="0" alt="[IM Text]"></a>
                </td>
              </tr>
            </table>
          </div>This 'missed' image is basically same as creating a "<code><a href="../files/#null">null:</a></code>" image but with the original source images page or virtual canvas size set (but not its offset), and all other image meta-data, such as GIF animation timing delays. The GIF disposal method however may be modified to ensure animations remain correct, after cropping. Basically you need to keep in mind that "<code><a href="../option_link.cgi?crop">-crop</a></code>" and other similarly related operators can produce a special 'missed' image. As such you should plan to look for the warning message, or this special 'Missed Image' when writing a script using IM, if such a minimal image is possible and can cause you problems. If you don't want the warning message (for example you expect and handle, the occasionally 'missed' image), you can add a "<code><a href="../option_link.cgi?quiet">-quiet</a></code>" <a href="../basics/#controls">Operational Control Setting</a> to the command line. This tells IM to not output informational warning messages, only real errors. At this time there is no method to remove any 'missed', or "<code><a href="../files/#null">null:</a></code>" images from the current image sequence. However such a method has been proposed for a future release of IM. Mail me if you find you need such a method. <a name="crop_page" id="crop_page"></a>
          <h3>Crop an image with existing Virtual Canvas</h3>If an image already has an existing <a href="../basics/#virtual_canvas">Virtual Canvas</a>, (for example a frame of a GIF animation), then the "<code><a href="../option_link.cgi?crop">-crop</a></code>" operation will be applied relative to the virtual canvas, and NOT to the actual image. That is, it will try to preserve the offset of the actual pixel data of the cropped image on the canvas. That is, a specific pixel before the crop should still be located at the same offset relative to the virtual canvas afterward. In this way cropping of layered images, or GIF animations will continue to work right, even though the 'canvas' itself was not cropped. Here we create an image centered on a page canvas, and we crop it in various ways. As before the canvas size itself is not modified by the operation.
          <div align="center">
            <table class="table table-sm table-hover table-striped" cellspacing="0" cellpadding="5" width="90%" bgcolor="#F8F8F8">
              <tr>
                <td>
                  <pre><code execute="" out="crop_page_ident.txt">
  magick rose: -shave 12x0 -repage 64x64+9+9  paged.gif
  magick paged.gif -crop 32x32+16+16  crop_page.gif
  magick paged.gif -crop 32x32+0+0    crop_page_tl.gif
  magick paged.gif -crop 32x32+32+32  crop_page_br.gif
  magick paged.gif -crop 60x60+2+2    crop_page_all.gif
  magick paged.gif -quiet -crop 32x32+56+56  crop_page_miss.gif
<br>  magick identify paged.gif crop_page.gif crop_page_tl.gif crop_page_br.gif \
           crop_page_all.gif crop_page_miss.gif
</code></pre>
                </td>
              </tr>
            </table><a href="paged.gif"><img src="paged.gif" width="64" height="64" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a> <img src="../img_www/right.gif" width="20" height="20" align="middle" alt="==&gt;"> <a href="crop_page.gif"><img src="crop_page.gif" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a> <a href="crop_page_tl.gif"><img src="crop_page_tl.gif" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a> <a href="crop_page_br.gif"><img src="crop_page_br.gif" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a> <a href="crop_page_all.gif"><img src="crop_page_all.gif" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a> <a href="crop_page_miss.gif"><img src="crop_page_miss.gif" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a>
            <table border="0" cellspacing="0" cellpadding="5" width="90%" bgcolor="#F8F8F8">
              <tr>
                <td>
                  <a href="crop_page_ident.txt"><img src="crop_page_ident.txt.gif" align="middle" vspace="0" hspace="0" border="0" alt="[IM Text]"></a>
                </td>
              </tr>
            </table>
          </div>That last example in the above was of course, the special <a href="#crop_missed">Missed Image</a>. Note that I suppressed the normal warning message from IM using a "<code><a href="../option_link.cgi?quiet">-quiet</a></code>" setting. Just so you can see just what is going on, lets have a closer look at the paged crop of the lower right corner of the image. Here I have drawn a semi-transparent square over the area that was cropped. <a name="crop_area" id="crop_area"></a>
          <div align="center">
            <table class="table table-sm table-hover table-striped" cellspacing="0" cellpadding="5" width="90%" bgcolor="#F8F8F8">
              <tr>
                <td>
                  <pre class="bg-light text-dark mx-4"><samp>
  magick paged.gif -page 64x64+32+32 -size 32x32 xc:'#fff8' \
          -alpha set  -background none  -mosaic    crop_area_br.png
</samp></pre>
                </td>
              </tr>
            </table><a href="paged.gif"><img src="paged.gif" width="64" height="64" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a> <img src="../img_www/right.gif" width="20" height="20" align="middle" alt="==&gt;"> <a href="crop_area_br.png"><img src="crop_area_br.png" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a> <img src="../img_www/right.gif" width="20" height="20" align="middle" alt="==&gt;"> <a href="crop_page_br.gif"><img src="crop_page_br.gif" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a>
          </div>From this you can see just what is happening. Even though the crop is contained completely in the page canvas, the crop did not cover the actual image completely. The result is that the actual image is smaller than the user may have intended, but still positioned on a larger canvas or page. <a name="crop_repage" id="crop_repage"></a>
          <h3>Removing Virtual Canvas from Results</h3>If this <a href="../basics/#virtual_canvas">Virtual Canvas</a> information is not wanted, then you can use the special "<code><a href="../option_link.cgi?repage">+repage</a></code>" operator to reset the page canvas and position to match the actual cropped image.
          <div align="center">
            <table class="table table-sm table-hover table-striped" cellspacing="0" cellpadding="5" width="90%" bgcolor="#F8F8F8">
              <tr>
                <td>
                  <pre class="bg-light text-dark mx-4"><samp>
  magick rose: -crop 40x30+10+10  +repage  repage.gif
  magick rose: -crop 40x30+40+30  +repage  repage_br.gif
  magick rose: -crop 40x30-10-10  +repage  repage_tl.gif
  magick rose: -crop 90x60-10-10  +repage  repage_all.gif
  magick rose: -quiet  -crop 40x30+90+60  +repage  repage_miss.gif
</samp></pre>
                </td>
              </tr>
            </table><a href="rose.gif"><img src="rose.gif" width="70" height="46" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a> <img src="../img_www/right.gif" width="20" height="20" align="middle" alt="==&gt;"> <a href="repage.gif"><img src="repage.gif" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a> <a href="repage_br.gif"><img src="repage_br.gif" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a> <a href="repage_tl.gif"><img src="repage_tl.gif" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a> <a href="repage_all.gif"><img src="repage_all.gif" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a> <a href="repage_miss.gif"><img src="repage_miss.gif" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a>
          </div>This is of course the result new users of IM would normally have expected from the "<code><a href="../option_link.cgi?crop">-crop</a></code>" operator. It is actually such a common thing to do that you could call it a rule of thumb.
          <div align="center">
            <b>Always use "<code><a href="../option_link.cgi?repage">+repage</a></code>" after any 'crop' like operation.<br>
            Unless you actually need to preserve that info.</b>
          </div>The last image in the above is of course the special <a href="#crop_missed">crop missed image</a>, but I supressed the warning message using the "<code><a href="../option_link.cgi?quiet">-quiet</a></code>" operational setting.
          <table border="0" cellspacing="0" cellpadding="0" width="90%" align="center">
            <tr valign="top">
              <td><img src="../img_www/warning.gif" width="28" height="28"><img src="../img_www/space.gif" width="12" height="16"></td>
              <td align="justify" width="100%"><font size="-1"><i>For IM version 5 and earlier the "<code><a href="../option_link.cgi?repage">+repage</a></code>" operation was handled by a "<code>-page +0+0</code>" argument sequence, usually just before saving to format that uses virtual canvas and offset information, such as GIF. But that was only usable when either reading or writing the image to a file, preventing its use between multiple image processing operations.</i></font><font size="-1"><i>With IM version 6, <a href="../basics/#cmdline">command line restructure</a>, the "<code><a href="../option_link.cgi?page">-page</a></code>" option became purely an image read/create setting for use in creating <a href="../anim_basics/#gif_anim">GIF animations</a> and <a href="../layers/#flatten">Layers of Images</a>. As such separate "<code><a href="../option_link.cgi?repage">-repage</a></code>" and "<code><a href="../option_link.cgi?set">-set</a> page</code>" operators were added to allow users to set or change the virtual canvas information.</i></font></td>
            </tr>
          </table><a name="crop_viewport" id="crop_viewport"></a>
          <h3>Viewport Cropping with Virtual Canvas Adjustments</h3>From ImageMagick version 6.2.4-5, you can add a new special flag to the "<code><a href="../option_link.cgi?crop">-crop</a></code>" argument. This flag '<code>!</code>' will tell crop to adjust the <a href="../basics/#virtual_canvas">Virtual Canvas</a> information of the returned image so that it is relative to the area cropped. In other words, regardless of the resulting size of the actual image cropped, the canvas and offset of the image returned will be adjusted to match the area you requested cropped. You can think of this flag as cropping an image to match a 'window' or 'viewport' of the crop area. Even if half the image is not visible in that 'window', the virtual canvas and offset of the part returned will match that 'viewport'. For example...
          <div align="center">
            <table class="table table-sm table-hover table-striped" cellspacing="0" cellpadding="5" width="90%" bgcolor="#F8F8F8">
              <tr>
                <td>
                  <pre class="bg-light text-dark mx-4"><samp>
  magick rose: -crop 40x30+10+10\!  crop_vp.gif
  magick rose: -crop 40x30+40+30\!  crop_vp_br.gif
  magick rose: -crop 40x30-10-10\!  crop_vp_tl.gif
  magick rose: -crop 90x60-10-10\!  crop_vp_all.gif
  magick rose: -quiet -crop 40x30+90+60\!  crop_vp_miss.gif
</samp><code execute="" nowarn="" out="crop_vp_ident.txt">
  magick identify rose.gif  crop_vp.gif crop_vp_br.gif crop_vp_tl.gif \
              crop_vp_all.gif  crop_vp_miss.gif
</code></pre>
                </td>
              </tr>
            </table><a href="rose.gif"><img src="rose.gif" width="70" height="46" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a> <img src="../img_www/right.gif" width="20" height="20" align="middle" alt="==&gt;"> <a href="crop_vp.gif"><img src="crop_vp.gif" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a> <a href="crop_vp_br.gif"><img src="crop_vp_br.gif" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a> <a href="crop_vp_tl.gif"><img src="crop_vp_tl.gif" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a> <a href="crop_vp_all.gif"><img src="crop_vp_all.gif" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a> <a href="crop_vp_miss.gif"><img src="crop_vp_miss.gif" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a>
            <table border="0" cellspacing="0" cellpadding="5" width="90%" bgcolor="#F8F8F8">
              <tr>
                <td>
                  <a href="crop_vp_ident.txt"><img src="crop_vp_ident.txt.gif" align="middle" vspace="0" hspace="0" border="0" alt="[IM Text]"></a>
                </td>
              </tr>
            </table>
          </div>
          <table border="0" cellspacing="0" cellpadding="0" width="90%" align="center">
            <tr valign="top">
              <td><img src="../img_www/reminder.gif" width="20" height="16"><img src="../img_www/space.gif" width="20" height="16"></td>
              <td align="justify" width="100%"><font size="-1"><i>The '<code>!</code>' character has special significance to some UNIX shells, like "<code>csh</code>", and must be escaped with a backslash, even when placed inside quotes.</i></font></td>
            </tr>
          </table>Notice how the canvas size of the image returned now matches the area in which the image was cropped. For crops of images that are completely within the actual image, the result will be equivalent to following the crop with a "<code><a href="../option_link.cgi?repage">+repage</a></code>". However any partial or missed cropping of the image, the result will a larger canvas and a possible offset to the resulting image. As such this is no substitute for doing a "<code><a href="../option_link.cgi?repage">+repage</a></code>" after cropping to reset page/canvas information. However you can follow a 'viewport crop' with a <a href="../layers/#flatten">Flatten</a> to 'fill out' the images new virtual canvas with real pixels. That is, you will be left with an image that is guaranteed to be the size of the requested crop, with any 'missed' areas filled out with the current "<code><a href="../option_link.cgi?background">-background</a></code>" color 'viewport'.
          <table border="0" cellspacing="0" cellpadding="0" width="100%">
            <tr>
              <td width="100%" align="justify">
                For example when <a href="../thumbnails/#pad">Padding out an Image</a>.
                <table class="table table-sm table-hover table-striped" cellspacing="0" cellpadding="5" width="100%" bgcolor="#F8F8F8">
                  <tr>
                    <td>
                      <pre class="bg-light text-dark mx-4"><samp>
  magick rose: -crop 100x100-15-25\! -background skyblue -flatten \
          crop_viewport.gif
</samp></pre>
                    </td>
                  </tr>
                </table>
              </td>
              <td>
                <a href="crop_viewport.gif"><img src="crop_viewport.gif" align="middle" vspace="2" hspace="5" border="1" alt="[IM Output]"></a>
              </td>
            </tr>
          </table>Flattening an image after a viewport crop is actually equivalent to using the <a href="#extent">Extent Operator</a> (see below), to provide a 'padded crop'. A 'viewport crop' flag is also very important when cropping GIF animations, as it not only adjusts the canvas size, but also insures all the image frames are still correctly positioned within the cropped area. Without this option cropping a GIF animation is very difficult requiring external correction of the image canvas size and offsets. For and example of this, see <a href="../anim_mods/#crop_viewport">Animation Crop, with the canvas too</a>. In many ways a 'viewport crop' is closely related to the special <a href="../distorts/#distort_viewport">Viewport Distort Setting</a> in that both act is if they are a 'window' into the resulting image. Both can be used as a 'cropping' method.
          <table border="0" cellspacing="0" cellpadding="0" width="90%" align="center">
            <tr valign="top">
              <td><img src="../img_www/reminder.gif" width="20" height="16"><img src="../img_www/space.gif" width="20" height="16"></td>
              <td align="justify" width="100%"><font size="-1"><i>The '<code>!</code>' flag can NOT be used when generating multi-image <a href="#crop_tile">Tiled crops</a>, or with equal-area tile cropping, where it has a different meaning. See the appropriate sections below.</i></font></td>
            </tr>
          </table><a name="crop_gravity" id="crop_gravity"></a>
          <h3>Crop relative to Gravity</h3>The offset position of the "<code><a href="../option_link.cgi?crop">-crop</a></code>" by default is relative to the top-left corner of the image. However by setting the "<code><a href="../option_link.cgi?gravity">-gravity</a></code>" setting, you can tell "<code><a href="../option_link.cgi?crop">-crop</a></code>" to cut the image relative to either the center, corner, or an edge of the image. The most common use of a gravitated crop, is to crop the '<code>center</code>' of an image.
          <table border="0" cellspacing="0" cellpadding="0" width="100%">
            <tr>
              <td width="100%" align="justify">
                <table class="table table-sm table-hover table-striped" cellspacing="0" cellpadding="5" width="100%" bgcolor="#F8F8F8">
                  <tr>
                    <td>
                      <pre class="bg-light text-dark mx-4"><samp>
  magick rose: -gravity Center  -crop 32x32+0+0 +repage  crop_center.gif
</samp></pre>
                    </td>
                  </tr>
                </table>
              </td>
              <td>
                <a href="crop_center.gif"><img src="crop_center.gif" align="middle" vspace="5" hspace="5" border="1" alt="[IM Output]"></a>
              </td>
            </tr>
          </table>The "<code><a href="../option_link.cgi?gravity">-gravity</a></code>" setting does not just effect the initial 'zero' position of the crop but it also effects the direction of the crop offset. For example if you use a "<code><a href="../option_link.cgi?gravity">-gravity</a></code>" of '<code>South</code>', and offset of '<code>+0+5</code>' will offset the crop area upward, instead of downward as it normally would.
          <table border="0" cellspacing="0" cellpadding="0" width="100%">
            <tr>
              <td width="100%" align="justify">
                <table class="table table-sm table-hover table-striped" cellspacing="0" cellpadding="5" width="100%" bgcolor="#F8F8F8">
                  <tr>
                    <td>
                      <pre class="bg-light text-dark mx-4"><samp>
  magick rose: -gravity South  -crop 20x20+0+5   crop_south.gif
</samp></pre>
                    </td>
                  </tr>
                </table>
              </td>
              <td>
                <a href="crop_south.gif"><img src="crop_south.gif" align="middle" vspace="5" hspace="5" border="1" alt="[IM Output]"></a>
              </td>
            </tr>
          </table>Note the position of the crop example above. I purposely left off the "<code><a href="../option_link.cgi?repage">+repage</a></code>" operation so you can see how the crop area was displaced from the bottom edge of the image. Also notice that the crop area is not only relative to bottom (southern) edge, but that the area is center 'justified' to be middle of the bottom edge. This is done with all gravity effected operations. <a name="crop_percent" id="crop_percent"></a>
          <h3>Crop a Percentage of an Image</h3>The "<code><a href="../option_link.cgi?crop">-crop</a></code>" operator also understands how to crop an image to just a percentage of its original size. For example this will half the size of the image.
          <table border="0" cellspacing="0" cellpadding="0" width="100%">
            <tr>
              <td width="100%" align="justify">
                <table class="table table-sm table-hover table-striped" cellspacing="0" cellpadding="5" width="100%" bgcolor="#F8F8F8">
                  <tr>
                    <td>
                      <pre class="bg-light text-dark mx-4"><samp>
  magick rose:  -crop 50%x+0+0      crop_half.gif
</samp></pre>
                    </td>
                  </tr>
                </table>
              </td>
              <td>
                <a href="crop_half.gif"><img src="crop_half.gif" align="middle" vspace="5" hspace="5" border="1" alt="[IM Output]"></a>
              </td>
            </tr>
          </table>
          <table border="0" cellspacing="0" cellpadding="0" width="90%" align="center">
            <tr valign="top">
              <td><img src="../img_www/reminder.gif" width="20" height="16"><img src="../img_www/space.gif" width="20" height="16"></td>
              <td align="justify" width="100%"><font size="-1"><i>If only one size number is given, then that value is used for both the width and height percentages and the final size of the area that is being cropped will be rounded to nearest integer. The offset is not optional.</i></font></td>
            </tr>
          </table>Note that while the size can be a percentage the offset will always be in pixels. You can not provide an offset as a percentage of the image size.
          <table border="0" cellspacing="0" cellpadding="0" width="100%">
            <tr>
              <td width="100%" align="justify">
                <table class="table table-sm table-hover table-striped" cellspacing="0" cellpadding="5" width="100%" bgcolor="#F8F8F8">
                  <tr>
                    <td>
                      <pre class="bg-light text-dark mx-4"><samp>
  magick rose:  -crop 50%x+30+20      crop_percent.gif
</samp></pre>
                    </td>
                  </tr>
                </table>
              </td>
              <td>
                <a href="crop_percent.gif"><img src="crop_percent.gif" align="middle" vspace="5" hspace="5" border="1" alt="[IM Output]"></a>
              </td>
            </tr>
          </table>
          <table border="0" cellspacing="0" cellpadding="0" width="90%" align="center">
            <tr valign="top">
              <td><img src="../img_www/reminder.gif" width="20" height="16"><img src="../img_www/space.gif" width="20" height="16"></td>
              <td align="justify" width="100%"><font size="-1"><i>When a crop is given with an offset you <b>must</b> supply an '<code>x</code>' symbol in the argument so that the argument can be interpreted correctly. This is especially important when only a single number is provided for both width and height of the crop area.<br>
              <br>
              As such you can not use an argument like '<code>50%+30+20</code> which is an error, and will result in crop silently doing nothing.</i></font></td>
            </tr>
          </table>More commonly a percentage crop is done from the center of an image.
          <table border="0" cellspacing="0" cellpadding="0" width="100%">
            <tr>
              <td width="100%" align="justify">
                <table class="table table-sm table-hover table-striped" cellspacing="0" cellpadding="5" width="100%" bgcolor="#F8F8F8">
                  <tr>
                    <td>
                      <pre class="bg-light text-dark mx-4"><samp>
  magick rose: -gravity Center -crop 50x80%+0+0  crop_percent_center.gif
</samp></pre>
                    </td>
                  </tr>
                </table>
              </td>
              <td>
                <a href="crop_percent_center.gif"><img src="crop_percent_center.gif" align="middle" vspace="5" hspace="5" border="1" alt="[IM Output]"></a>
              </td>
            </tr>
          </table>
          <table border="0" cellspacing="0" cellpadding="0" width="90%" align="center">
            <tr valign="top">
              <td><img src="../img_www/reminder.gif" width="20" height="16"><img src="../img_www/space.gif" width="20" height="16"></td>
              <td align="justify" width="100%"><font size="-1"><i>The percentage symbol '<code>%</code>' can appear anywhere in an argument, and if given will refer to both width and height numbers. It is a flag that just declares that the 'image size' parts are a percentage fraction of the images virtual canvas or page size. Offsets are always given in pixels.</i></font></td>
            </tr>
          </table>You can also use a 'viewport crop' flag with percentage crops, to automatically set the canvas size and offset of the crop, to the area being cropped.
          <table border="0" cellspacing="0" cellpadding="0" width="100%">
            <tr>
              <td width="100%" align="justify">
                <table class="table table-sm table-hover table-striped" cellspacing="0" cellpadding="5" width="100%" bgcolor="#F8F8F8">
                  <tr>
                    <td>
                      <pre class="bg-light text-dark mx-4"><samp>
  magick rose: -gravity Center -crop 50%\!  crop_percent_vp.gif
</samp></pre>
                    </td>
                  </tr>
                </table>
              </td>
              <td>
                <a href="crop_percent_vp.gif"><img src="crop_percent_vp.gif" align="middle" vspace="5" hspace="5" border="1" alt="[IM Output]"></a>
              </td>
            </tr>
          </table>
          <table border="0" cellspacing="0" cellpadding="0" width="90%" align="center">
            <tr valign="top">
              <td><img src="../img_www/reminder.gif" width="20" height="16"><img src="../img_www/space.gif" width="20" height="16"></td>
              <td align="justify" width="100%"><font size="-1"><i>You can not use percent sizes for tile cropping (see next). As such if the offset is not provided, and a percent size is given (as above) an offset of +0+0 is assumed.<br>
              <br></i></font></td>
            </tr>
          </table>The '<code>!</code>' flag means a "<code><a href="../option_link.cgi?repage">+repage</a></code>" is not needed. Caution however is still recommended, for input images that may also have virtual canvas size and offsets. <a name="crop_tile" id="crop_tile"></a>
          <h3>Tile Cropping, sub-dividing one image into multiple images</h3>One of the more useful aspects of crop is when you don't give a specific position to the crop command. That is, you give a size, and not a position within the image to crop. In this case instead of generating just one image, crop generates a whole series of images..
          <div align="center">
            <table class="table table-sm table-hover table-striped" cellspacing="0" cellpadding="5" width="90%" bgcolor="#F8F8F8">
              <tr>
                <td>
                  <pre><code execute="" out="tiles_ident.txt">
<br>  magick rose: -shave 12x0 -repage 64x64+9+9  paged.gif
<br>  magick paged.gif  +gravity -crop 32x32  tiles_%d.gif
<br>  magick identify paged.gif tiles_?.gif
</code></pre>
                </td>
              </tr>
            </table><a href="paged.gif"><img src="paged.gif" width="64" height="64" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a> <img src="../img_www/right.gif" width="20" height="20" align="middle" alt="==&gt;"> <a href="tiles_0.gif"><img src="tiles_0.gif" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a> <a href="tiles_1.gif"><img src="tiles_1.gif" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a> <a href="tiles_2.gif"><img src="tiles_2.gif" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a> <a href="tiles_3.gif"><img src="tiles_3.gif" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a>
            <table border="0" cellspacing="0" cellpadding="5" width="90%" bgcolor="#F8F8F8">
              <tr>
                <td>
                  <a href="tiles_ident.txt"><img src="tiles_ident.txt.gif" align="middle" vspace="0" hspace="0" border="0" alt="[IM Text]"></a>
                </td>
              </tr>
            </table>
          </div>If you just want to extract a specific number of tiles from an image have a look at <a href="#crop_equal">Cropping into roughly Equally Sized Divisions</a> below.
          <table border="0" cellspacing="0" cellpadding="0" width="90%" align="center">
            <tr valign="top">
              <td><img src="../img_www/reminder.gif" width="20" height="16"><img src="../img_www/space.gif" width="20" height="16"></td>
              <td align="justify" width="100%"><font size="-1"><i>It is a good idea to make sure gravity is turned off using "<code><a href="../option_link.cgi?gravity">+gravity</a></code>". This is because in one special case (centered percentage crop) the gravity setting can turn off tile cropping. Other effects of gravity on tiled cropping is also undefined.</i></font></td>
            </tr>
          </table>By using "<code><a href="../option_link.cgi?mosaic">-mosaic</a></code>" or "<code><a href="../option_link.cgi?flatten">-flatten</a></code>" image layering operators, (see <a href="../layers/#flatten">Layer Flatten</a>) you can layer these images all on top of each other, restoring the original image.
          <table border="0" cellspacing="0" cellpadding="0" width="100%">
            <tr>
              <td width="100%" align="justify">
                <table class="table table-sm table-hover table-striped" cellspacing="0" cellpadding="5" width="100%" bgcolor="#F8F8F8">
                  <tr>
                    <td>
                      <pre class="bg-light text-dark mx-4"><samp>
  magick tiles_[0-3].gif -background white -mosaic  tiles_mosaic.gif
</samp></pre>
                    </td>
                  </tr>
                </table>
              </td>
              <td>
                <a href="tiles_mosaic.gif"><img src="tiles_mosaic.gif" width="64" height="64" align="middle" vspace="5" hspace="5" border="1" alt="[IM Output]"></a>
              </td>
            </tr>
          </table>However as you can see the virtual canvas of the image has been filled with the background color by "<code><a href="../option_link.cgi?mosaic">-mosaic</a></code>". An alternative is to use "<code><a href="../option_link.cgi?layers">-layers</a> merge</code>" (see <a href="../layers/#merge">Layer Merge</a>), which merges the multiple layer images into a new layer image just large enough to hold all the given images. That is, the virtual canvas is not filled in, as "<code><a href="../option_link.cgi?mosaic">-mosaic</a></code>" or "<code><a href="../option_link.cgi?flatten">-flatten</a></code>" layering methods would.
          <table border="0" cellspacing="0" cellpadding="0" width="100%">
            <tr>
              <td width="100%" align="justify">
                <table class="table table-sm table-hover table-striped" cellspacing="0" cellpadding="5" width="100%" bgcolor="#F8F8F8">
                  <tr>
                    <td>
                      <pre class="bg-light text-dark mx-4"><samp>
  magick tiles_[0-3].gif -background none -layers merge  tiles_layered.gif
</samp><code execute="" nowarn="" out="tiles_layered_ident.txt">  magick identify tiles_layered.gif
</code></pre>
                    </td>
                  </tr>
                </table>
              </td>
              <td>
                <a href="tiles_layered.gif"><img src="tiles_layered.gif" align="middle" vspace="5" hspace="5" border="1" alt="[IM Output]"></a>
              </td>
            </tr>
            <tr>
              <td>
                <table border="0" cellspacing="0" cellpadding="5" width="100%" bgcolor="#F8F8F8">
                  <tr>
                    <td>
                      <pre>
  <a href="tiles_layered_ident.txt"><img src="tiles_layered_ident.txt.gif" align="middle" vspace="0" hspace="0" border="0" alt="[IM Text]"></a>
</pre>
                    </td>
                  </tr>
                </table>
              </td>
              <td></td>
            </tr>
          </table>If you had reset the the canvas and offset information using "<code><a href="../option_link.cgi?repage">+repage</a></code>" then the images no longer contain the offset from where they were cropped, nor the original size of the source image. In that case you can re-join all the images together again using the special '<code>concatenation</code>' mode of "<code>magick montage</code>". You will need to tell montage how many rows or columns of images were extracted from the original image.
          <div align="center">
            <table class="table table-sm table-hover table-striped" cellspacing="0" cellpadding="5" width="90%" bgcolor="#F8F8F8">
              <tr>
                <td>
                  <pre class="bg-light text-dark mx-4"><samp>
  magick rose: -crop 20x20  +repage  +adjoin  rose_tiles_%02d.gif
  montage -mode concatenate -tile 4x  rose_tiles_*.gif   rose_rejoined.gif
</samp></pre>
                </td>
              </tr>
            </table>
            <table cellspacing="0" cellpadding="0">
              <tr>
                <td>
                  <a href="rose.gif"><img src="rose.gif" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a>
                </td>
                <td><img src="../img_www/right.gif" width="20" height="20" align="middle" alt="==&gt;"></td>
                <td>
                  <a href="rose_tiles_00.gif"><img src="rose_tiles_00.gif" align="middle" vspace="5" hspace="5" border="1" alt="[IM Output]"></a> <a href="rose_tiles_01.gif"><img src="rose_tiles_01.gif" align="middle" vspace="5" hspace="5" border="1" alt="[IM Output]"></a> <a href="rose_tiles_02.gif"><img src="rose_tiles_02.gif" align="middle" vspace="5" hspace="5" border="1" alt="[IM Output]"></a> <a href="rose_tiles_03.gif"><img src="rose_tiles_03.gif" align="middle" vspace="5" hspace="5" border="1" alt="[IM Output]"></a><br>
                  <a href="rose_tiles_04.gif"><img src="rose_tiles_04.gif" align="middle" vspace="5" hspace="5" border="1" alt="[IM Output]"></a> <a href="rose_tiles_05.gif"><img src="rose_tiles_05.gif" align="middle" vspace="5" hspace="5" border="1" alt="[IM Output]"></a> <a href="rose_tiles_06.gif"><img src="rose_tiles_06.gif" align="middle" vspace="5" hspace="5" border="1" alt="[IM Output]"></a> <a href="rose_tiles_07.gif"><img src="rose_tiles_07.gif" align="middle" vspace="5" hspace="5" border="1" alt="[IM Output]"></a><br>
                  <a href="rose_tiles_08.gif"><img src="rose_tiles_08.gif" align="middle" vspace="5" hspace="5" border="1" alt="[IM Output]"></a> <a href="rose_tiles_09.gif"><img src="rose_tiles_09.gif" align="middle" vspace="5" hspace="5" border="1" alt="[IM Output]"></a> <a href="rose_tiles_10.gif"><img src="rose_tiles_10.gif" align="middle" vspace="5" hspace="5" border="1" alt="[IM Output]"></a> <a href="rose_tiles_11.gif"><img src="rose_tiles_11.gif" align="middle" vspace="5" hspace="5" border="1" alt="[IM Output]"></a>
                </td>
                <td><img src="../img_www/right.gif" width="20" height="20" align="middle" alt="==&gt;"></td>
                <td>
                  <a href="rose_rejoined.gif"><img src="rose_rejoined.gif" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a>
                </td>
              </tr>
            </table>
          </div>Note that the names of the individual images is from "<code>rose_tiles_00.gif</code>" to "<code>rose_tiles_11.gif</code>", which simply the sequence number of the tiles in memory. This is not very nice as the filenames give no easy indication of the actual position each tile belongs to, or the total number of tiles per row and column. As of IM v6.4.8-4 you can also use special <a href="../files/#save_escapes">Filename Percent Escapes</a> to generate and include special labels into the output filename. Using this with <a href="../transform/#fx_escapes">FX Percent Escapes</a> you can calculate a different 'tile position' for each image. For example...
          <div align="center">
            <table class="table table-sm table-hover table-striped" cellspacing="0" cellpadding="5" width="90%" bgcolor="#F8F8F8">
              <tr>
                <td>
                  <pre class="bg-light text-dark mx-4"><samp>
  magick rose: -crop 20x20 \
          -set filename:tile "%[fx:page.x/20+1]_%[fx:page.y/20+1]" \
          +repage +adjoin "rose_tile_%[filename:tile].gif"
</samp></pre>
                </td>
              </tr>
            </table>
            <table cellspacing="0" cellpadding="0">
              <tr>
                <td>
                  <a href="rose.gif"><img src="rose.gif" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a>
                </td>
                <td><img src="../img_www/right.gif" width="20" height="20" align="middle" alt="==&gt;"></td>
                <td><img src="../img_www/space.gif" width="10" height="1" align="middle" alt="==&gt;"></td>
                <td>
                  <a href="rose_tile_1_1.gif"><img src="rose_tile_1_1.gif" align="middle" vspace="5" hspace="5" border="1" alt="[IM Output]"></a> <a href="rose_tile_2_1.gif"><img src="rose_tile_2_1.gif" align="middle" vspace="5" hspace="5" border="1" alt="[IM Output]"></a> <a href="rose_tile_3_1.gif"><img src="rose_tile_3_1.gif" align="middle" vspace="5" hspace="5" border="1" alt="[IM Output]"></a> <a href="rose_tile_4_1.gif"><img src="rose_tile_4_1.gif" align="middle" vspace="5" hspace="5" border="1" alt="[IM Output]"></a><br>
                  <a href="rose_tile_1_2.gif"><img src="rose_tile_1_2.gif" align="middle" vspace="5" hspace="5" border="1" alt="[IM Output]"></a> <a href="rose_tile_2_2.gif"><img src="rose_tile_2_2.gif" align="middle" vspace="5" hspace="5" border="1" alt="[IM Output]"></a> <a href="rose_tile_3_2.gif"><img src="rose_tile_3_2.gif" align="middle" vspace="5" hspace="5" border="1" alt="[IM Output]"></a> <a href="rose_tile_4_2.gif"><img src="rose_tile_4_2.gif" align="middle" vspace="5" hspace="5" border="1" alt="[IM Output]"></a><br>
                  <a href="rose_tile_1_3.gif"><img src="rose_tile_1_3.gif" align="middle" vspace="5" hspace="5" border="1" alt="[IM Output]"></a> <a href="rose_tile_2_3.gif"><img src="rose_tile_2_3.gif" align="middle" vspace="5" hspace="5" border="1" alt="[IM Output]"></a> <a href="rose_tile_3_3.gif"><img src="rose_tile_3_3.gif" align="middle" vspace="5" hspace="5" border="1" alt="[IM Output]"></a> <a href="rose_tile_4_3.gif"><img src="rose_tile_4_3.gif" align="middle" vspace="5" hspace="5" border="1" alt="[IM Output]"></a>
                </td>
              </tr>
            </table>
          </div>Will generate the tile image filenames "<code>rose_tile_1_1.gif</code>" to "<code>rose_tile_4_3.gif</code>", which is a much better file naming scheme. Tricky but it does work. Unfortunately you can not format the number generated by a <a href="../basics/#arg_percent">Percent Escapes</a>, to include padding with zeros or specify an exact number of floating point digits. At least not at this time. <a name="crop_tile_centered" id="crop_tile_centered"></a>
          <h3>Centered Tile Cropping</h3>In a <a href="../forum_link.cgi?t=16276">IM Forum Discussion</a> a request was made to center the tile cropping so as to distributed he 'remainder images' evenly around the edges. By doing this we maximize the effect of the complete tiles by placing them in the center of the image. Of course you also end up with more incomplete edge tiles. The solution was to center the input image on a virtual canvas, that was some multiple of the tile size wanted. For example to tile crop the "<code>rose:</code>" image (<code>70x46</code> pixels in size) into the maximum number of full <code>30x20</code> tiles, in the center of the image (and surrounded by reminder tiles) you would do the following.
          <ol>
            <li>First calculate the number of full tiles you can get from the image by dividing the image sizes...
              <div align="center">
                <pre>70x46 / 30x20 =&gt; 2x2 full tiles + remainder</pre>
              </div>
            </li>
            <li>Now add 2 more rows and columns to hold the remainder images (if needed)
              <div align="center">
                <pre>2x2 + 2x2 =&gt; 4x4 tile images</pre>
              </div>
            </li>
            <li>Multiply the tile size by this to get the virtual canvas size.
              <div align="center">
                <pre>30x20 * 4x4 =&gt; 120x80 canvas size</pre>
              </div>
            </li>
            <li>Subtract the original image size and divide into two for the centering offset.
              <div align="center">
                <pre>( 120x80 - 70x46 ) / 2 =&gt; +25+17</pre>
              </div>
            </li>
          </ol>So the virtual canvas and centering offset is <code>120x80+25+17</code>. And here we use the above calculations perform a Centered Tile Crop...
          <div align="center">
            <table class="table table-sm table-hover table-striped" cellspacing="0" cellpadding="5" width="90%" bgcolor="#F8F8F8">
              <tr>
                <td>
                  <pre class="bg-light text-dark mx-4"><samp>
  magick rose: -repage 120x80+25+17 -crop 30x20 +repage rose_30x20_%02d.gif
</samp></pre>
                </td>
              </tr>
            </table>
            <table cellspacing="0" cellpadding="0">
              <tr>
                <td>
                  <a href="rose.gif"><img src="rose.gif" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a>
                </td>
                <td><img src="../img_www/right.gif" width="20" height="20" align="middle" alt="==&gt;"></td>
                <td><img src="../img_www/space.gif" width="10" height="1" align="middle" alt="==&gt;"></td>
                <td>
                  <a href="rose_30x20_00.gif"><img src="rose_30x20_00.gif" align="middle" vspace="5" hspace="5" border="1" alt="[IM Output]"></a> <a href="rose_30x20_01.gif"><img src="rose_30x20_01.gif" align="middle" vspace="5" hspace="5" border="1" alt="[IM Output]"></a> <a href="rose_30x20_02.gif"><img src="rose_30x20_02.gif" align="middle" vspace="5" hspace="5" border="1" alt="[IM Output]"></a> <a href="rose_30x20_03.gif"><img src="rose_30x20_03.gif" align="middle" vspace="5" hspace="5" border="1" alt="[IM Output]"></a><br>
                  <a href="rose_30x20_04.gif"><img src="rose_30x20_04.gif" align="middle" vspace="5" hspace="5" border="1" alt="[IM Output]"></a> <a href="rose_30x20_05.gif"><img src="rose_30x20_05.gif" align="middle" vspace="5" hspace="5" border="1" alt="[IM Output]"></a> <a href="rose_30x20_06.gif"><img src="rose_30x20_06.gif" align="middle" vspace="5" hspace="5" border="1" alt="[IM Output]"></a> <a href="rose_30x20_07.gif"><img src="rose_30x20_07.gif" align="middle" vspace="5" hspace="5" border="1" alt="[IM Output]"></a><br>
                  <a href="rose_30x20_08.gif"><img src="rose_30x20_08.gif" align="middle" vspace="5" hspace="5" border="1" alt="[IM Output]"></a> <a href="rose_30x20_09.gif"><img src="rose_30x20_09.gif" align="middle" vspace="5" hspace="5" border="1" alt="[IM Output]"></a> <a href="rose_30x20_10.gif"><img src="rose_30x20_10.gif" align="middle" vspace="5" hspace="5" border="1" alt="[IM Output]"></a> <a href="rose_30x20_11.gif"><img src="rose_30x20_11.gif" align="middle" vspace="5" hspace="5" border="1" alt="[IM Output]"></a><br>
                  <a href="rose_30x20_12.gif"><img src="rose_30x20_12.gif" align="middle" vspace="5" hspace="5" border="1" alt="[IM Output]"></a> <a href="rose_30x20_13.gif"><img src="rose_30x20_13.gif" align="middle" vspace="5" hspace="5" border="1" alt="[IM Output]"></a> <a href="rose_30x20_14.gif"><img src="rose_30x20_14.gif" align="middle" vspace="5" hspace="5" border="1" alt="[IM Output]"></a> <a href="rose_30x20_15.gif"><img src="rose_30x20_15.gif" align="middle" vspace="5" hspace="5" border="1" alt="[IM Output]"></a>
                </td>
              </tr>
            </table>
          </div>If you want to preserve the original offset location of the tiles, but remove the centering offset, you can do a relative offset adjustment using "<code>-repage -25-17\!</code>" (replacing the "<code><a href="../option_link.cgi?repage">+repage</a></code>" in the above). If you did not add two columns and rows to the number of tiles and thus generate a negative offset you can effectively ignore the remainder edge tiles, and only output full and complete tiles that exist in the image.
          <div align="center">
            <table class="table table-sm table-hover table-striped" cellspacing="0" cellpadding="5" width="90%" bgcolor="#F8F8F8">
              <tr>
                <td>
                  <pre class="bg-light text-dark mx-4"><samp>
  magick rose: -repage 60x40-5-3 -crop 30x20 +repage rose_ctiles_%d.gif
</samp></pre>
                </td>
              </tr>
            </table>
            <table cellspacing="0" cellpadding="0">
              <tr>
                <td>
                  <a href="rose.gif"><img src="rose.gif" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a>
                </td>
                <td><img src="../img_www/right.gif" width="20" height="20" align="middle" alt="==&gt;"></td>
                <td><img src="../img_www/space.gif" width="10" height="1" align="middle" alt="==&gt;"></td>
                <td>
                  <a href="rose_ctiles_0.gif"><img src="rose_ctiles_0.gif" align="middle" vspace="5" hspace="5" border="1" alt="[IM Output]"></a> <a href="rose_ctiles_1.gif"><img src="rose_ctiles_1.gif" align="middle" vspace="5" hspace="5" border="1" alt="[IM Output]"></a><br>
                  <a href="rose_ctiles_2.gif"><img src="rose_ctiles_2.gif" align="middle" vspace="5" hspace="5" border="1" alt="[IM Output]"></a> <a href="rose_ctiles_2.gif"><img src="rose_ctiles_3.gif" align="middle" vspace="5" hspace="5" border="1" alt="[IM Output]"></a>
                </td>
              </tr>
            </table>
          </div>Basically as the remainders are now 'outside' the calculated virtual canvas the "<code><a href="../option_link.cgi?crop">-crop</a></code>" operator does not know they were there and ignores them. Again replacing the "<code><a href="../option_link.cgi?repage">+repage</a></code>" in the above, with a relative offset adjustment using the negated offset values "<code>-repage +5+3\!</code>" will restore the original offset locations from which the tiles were cropped. An alternative for a centered tile crop and ignoring reminders is to simply replace the virtual canvas setting with an appropriate crop.
          <div align="center">
            <table class="table table-sm table-hover table-striped" cellspacing="0" cellpadding="5" width="90%" bgcolor="#F8F8F8">
              <tr>
                <td>
                  <pre class="bg-light text-dark mx-4"><samp>
  magick rose: -gravity center -crop 60x40+0+0 +gravity +repage \
          -crop 30x20 +repage rose_ctiles2_%d.gif
</samp></pre>
                </td>
              </tr>
            </table>
            <table cellspacing="0" cellpadding="0">
              <tr>
                <td>
                  <a href="rose.gif"><img src="rose.gif" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a>
                </td>
                <td><img src="../img_www/right.gif" width="20" height="20" align="middle" alt="==&gt;"></td>
                <td><img src="../img_www/space.gif" width="10" height="1" align="middle" alt="==&gt;"></td>
                <td>
                  <a href="rose_ctiles2_0.gif"><img src="rose_ctiles2_0.gif" align="middle" vspace="5" hspace="5" border="1" alt="[IM Output]"></a> <a href="rose_ctiles2_1.gif"><img src="rose_ctiles2_1.gif" align="middle" vspace="5" hspace="5" border="1" alt="[IM Output]"></a><br>
                  <a href="rose_ctiles2_2.gif"><img src="rose_ctiles2_2.gif" align="middle" vspace="5" hspace="5" border="1" alt="[IM Output]"></a> <a href="rose_ctiles2_2.gif"><img src="rose_ctiles2_3.gif" align="middle" vspace="5" hspace="5" border="1" alt="[IM Output]"></a>
                </td>
              </tr>
            </table>
          </div>The above is easier to understand, but is also a little slower, as you are now performing two crops. However less calculations are needed. But if you want to recover the original tile offsets, you will still need to calculate the relative offset you needed, in which case you may as well do the task by the former faster method using the images virtual canvas.<br>
          <a name="crop_strip" id="crop_strip"></a>
          <h3>Strip Cropping, cropping out rows and columns</h3>With IM version 6.1.1, a "<code><a href="../option_link.cgi?crop">-crop</a></code>" was enhanced so that if one of the size arguments missing, or set to zero, then the missing size argument is set to the size of the image canvas/page. In most cases this is large enough to cover the image located on the canvas, <i>if the related offset is also set to zero</i>. This small change allows you to easily cut out a single row or column from the image, without needing a huge number like '<code>999999</code>' to cover the size of image. For example, here we extract a simple row and column from our 'paged' rose image.
          <div align="center">
            <table class="table table-sm table-hover table-striped" cellspacing="0" cellpadding="5" width="90%" bgcolor="#F8F8F8">
              <tr>
                <td>
                  <pre><code execute="" out="strip_ident.txt">
<br>  magick rose: -shave 12x0 -repage 64x64+9+9  paged.gif
<br>  magick paged.gif  -crop 20x0+30+0  strip_column.gif
<br>  magick paged.gif  -crop 0x20+0+30  strip_row.gif
<br>  magick identify paged.gif strip_column.gif strip_row.gif
</code></pre>
                </td>
              </tr>
            </table><a href="paged.gif"><img src="paged.gif" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a> <img src="../img_www/right.gif" width="20" height="20" align="middle" alt="==&gt;"> <a href="strip_column.gif"><img src="strip_column.gif" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a> <a href="strip_row.gif"><img src="strip_row.gif" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a>
            <table border="0" cellspacing="0" cellpadding="5" width="90%" bgcolor="#F8F8F8">
              <tr>
                <td>
                  <pre>
  <a href="strip_ident.txt"><img src="strip_ident.txt.gif" align="middle" vspace="0" hspace="0" border="0" alt="[IM Text]"></a>
</pre>
                </td>
              </tr>
            </table>
          </div>If you remove both offsets as well as one size argument, you can divide the image into a series of strips or columns, instead of tiles.
          <div align="center">
            <table class="table table-sm table-hover table-striped" cellspacing="0" cellpadding="5" width="90%" bgcolor="#F8F8F8">
              <tr>
                <td>
                  <pre class="bg-light text-dark mx-4"><samp>
<br>  magick rose: -crop 40x30+10+10  crop.gif
<br>  magick crop.gif -quiet -crop  20x  strips_%d.gif
</samp><code execute="" noimage="" out="strips_ident.txt">  magick identify crop.gif strips_?.gif
</code></pre>
                </td>
              </tr>
            </table><a href="crop.gif"><img src="crop.gif" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a> <img src="../img_www/right.gif" width="20" height="20" align="middle" alt="==&gt;"> <a href="strips_0.gif"><img src="strips_0.gif" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a> <a href="strips_1.gif"><img src="strips_1.gif" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a> <a href="strips_2.gif"><img src="strips_2.gif" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a> <a href="strips_3.gif"><img src="strips_3.gif" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a>
            <table border="0" cellspacing="0" cellpadding="5" width="90%" bgcolor="#F8F8F8">
              <tr>
                <td>
                  <pre>
  <a href="strips_ident.txt"><img src="strips_ident.txt.gif" align="middle" vspace="0" hspace="0" border="0" alt="[IM Text]"></a>
</pre>
                </td>
              </tr>
            </table>
          </div>Notice that tile cropping, strip or otherwise, is across the whole page canvas of the image, and as such is aligned to that canvas, and NOT just the actual image. This is why the first and last actual image generated in the above example is only 10 pixels wide. Of course if a specific tile, or in this case 'column' misses the actual image on the virtual canvas (such as the last image in the above), then a <a href="#crop_missed">crop missed image</a> is generated. The warning that IM would have normally produced was suppressed using a "<code><a href="../option_link.cgi?quiet">-quiet</a></code>" setting. This is not recommended unless you are expecting such an event, and are prepared for it, such as in a script.
          <table border="0" cellspacing="0" cellpadding="0" width="90%" align="center">
            <tr valign="top">
              <td><img src="../img_www/expert.gif" width="23" height="26"><img src="../img_www/space.gif" width="12" height="16"></td>
              <td align="justify" width="100%"><font size="-1"><i>It is possible for an image to be positioned such that it does not even appear on its own page or virtual canvas, or be so large that the page canvas can only contain a small window or part of the image.<br>
              <br>
              In such rare cases, strip cropping without any size arguments will get the image sub-division wrong, and produce respectively, <a href="#crop_missed">missed images</a>, or smaller tiles of only the parts within the virtual canvas bounds.<br>
              <br>
              The "<code><a href="../option_link.cgi?crop">-crop</a></code>" operator however will not be fixed to handle these rare special cases, as doing so will prevent its use in other cases, such as those exampled below.<br>
              <br>
              If this is a problem for you, sanitize the page offsets of the image before cropping by using "<code><a href="../option_link.cgi?repage">+repage</a></code>" to remove the virtual canvas before attempting to generate the tile images.</i></font></td>
            </tr>
          </table>As an alternative way of dividing images into separate rows, look at the special script "<code><a href="../scripts/divide_vert">divide_vert</a></code>". This program will let you divide up an image according to horizontal 'gaps' of solid single color. For example, if given an image of simple text, it will divide it into alternating images of 'lines' and 'gaps'. A simple option lets you remove those gaps. <a name="crop_quad" id="crop_quad"></a>
          <h3>Quadrants, cutting around a single point</h3>As any of the crop size numbers are missing then they are replaced with the size of the image canvas of the image you are cropping. This should in most cases result in the whole of the image in that dimension becoming part of the crop result. This allows, with cautious use of the arguments, is the ability to crop and image into quarters around a specific point (with that specific pixel placed as the top-right pixel of the bottom-left quadrant image). You do not need to know how big the image is to do this. For example, here I crop the image into quadrants around the point 30,40
          <div align="center">
            <table class="table table-sm table-hover table-striped" cellspacing="0" cellpadding="5" width="90%" bgcolor="#F8F8F8">
              <tr>
                <td>
                  <pre class="bg-light text-dark mx-4"><samp>
<br>  magick rose: -shave 12x0 -repage 64x64+9+9  paged.gif
<br>  magick paged.gif  -crop 30x40+0+0  quadrant_tl.gif
<br>  magick paged.gif  -crop 0x40+30+0  quadrant_tr.gif
<br>  magick paged.gif  -crop 30x0+0+40  quadrant_bl.gif
<br>  magick paged.gif  -crop    +30+40  quadrant_br.gif
</samp></pre>
                </td>
              </tr>
            </table><a href="paged.gif"><img src="paged.gif" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a> <img src="../img_www/right.gif" width="20" height="20" align="middle" alt="==&gt;"> <a href="quadrant_tl.gif"><img src="quadrant_tl.gif" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a> <a href="quadrant_tr.gif"><img src="quadrant_tr.gif" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a> <a href="quadrant_bl.gif"><img src="quadrant_bl.gif" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a> <a href="quadrant_br.gif"><img src="quadrant_br.gif" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a>
          </div>Of course if the point you were cropping around missed the actual image, then two or even three of the resulting quadrant images will be the special <a href="#crop_missed">crop missed error</a> images. <a name="crop_neg_offset" id="crop_neg_offset"></a>
          <h3>Using Negative Offsets, remove bottom or left edge</h3>Their is no reason that you can not use a negative offset with "<code><a href="../option_link.cgi?crop">-crop</a></code>". In fact at times it can have very definite benefits. For example lets take our paged rose image and progressively crop it with larger negative offsets. We will not supply an image size to "<code><a href="../option_link.cgi?crop">-crop</a></code>" argument, so it will default to the images canvas size.
          <div align="center">
            <table class="table table-sm table-hover table-striped" cellspacing="0" cellpadding="5" width="90%" bgcolor="#F8F8F8">
              <tr>
                <td>
                  <pre class="bg-light text-dark mx-4"><samp>
<br>  magick rose: -shave 12x0 -repage 64x64+9+9  paged.gif
<br>  magick paged.gif  -crop -10-10  neg_offset_1.gif
<br>  magick paged.gif  -crop -20-20  neg_offset_2.gif
<br>  magick paged.gif  -crop -30-30  neg_offset_3.gif
<br>  magick paged.gif  -crop -40-40  neg_offset_4.gif
<br>  magick paged.gif  -crop -50-50  neg_offset_5.gif
</samp></pre>
                </td>
              </tr>
            </table><a href="paged.gif"><img src="paged.gif" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a> <img src="../img_www/right.gif" width="20" height="20" align="middle" alt="==&gt;"> <a href="neg_offset_1.gif"><img src="neg_offset_1.gif" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a> <a href="neg_offset_2.gif"><img src="neg_offset_2.gif" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a> <a href="neg_offset_3.gif"><img src="neg_offset_3.gif" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a> <a href="neg_offset_4.gif"><img src="neg_offset_4.gif" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a> <a href="neg_offset_5.gif"><img src="neg_offset_5.gif" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a>
          </div>As you can see steadily decreasing the offset to a larger negative value slowly results in the bottom and right edges being 'chopped' off, the last example almost missing the actual image. If we took this one step further a <a href="#crop_missed">Missed Image</a> will be generated. It's a bit like using a "<code><a href="../option_link.cgi?chop">-chop</a></code>" operator but without a "<code><a href="../option_link.cgi?gravity">-gravity</a></code>" setting. See <a href="#chop">Chop, Removing Edges</a>. Of course by using "<code><a href="../option_link.cgi?crop">-crop</a></code>" you may need to use a "<code><a href="../option_link.cgi?repage">+repage</a></code>" operator to adjust the canvas/page information, where a "<code><a href="../option_link.cgi?chop">-chop</a></code>" automatically performs such an adjustment. That's life. <a name="crop_equal" id="crop_equal"></a>
          <h3>Cropping into roughly Equally Sized Divisions</h3>The biggest problem with <a href="#crop_tile">Tile Cropping</a> is that you can only define the final size of each tile. This works great when the image size is an exact multiple of the desired tile size, but as you have seen if this is not the case you can end up with 'short' tiles on the right and bottom edges. For example lets again divide the built in rose image, but try to divide it into 3x3 tiles. The original image is 70x46 pixels so divided by 3 make each tile 23x15 pixels...
          <div align="center">
            <table class="table table-sm table-hover table-striped" cellspacing="0" cellpadding="5" width="90%" bgcolor="#F8F8F8">
              <tr>
                <td>
                  <pre class="bg-light text-dark mx-4"><samp>
  magick rose: -crop 23x15  +repage  +adjoin  rose_23x15_%02d.gif
</samp></pre>
                </td>
              </tr>
            </table>
            <table cellspacing="0" cellpadding="0">
              <tr>
                <td>
                  <a href="rose.gif"><img src="rose.gif" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a>
                </td>
                <td><img src="../img_www/right.gif" width="20" height="20" align="middle" alt="==&gt;"></td>
                <td>
                  <a href="rose_23x15_00.gif"><img src="rose_23x15_00.gif" align="middle" vspace="4" hspace="2" border="1" alt="[IM Output]"></a> <a href="rose_23x15_01.gif"><img src="rose_23x15_01.gif" align="middle" vspace="4" hspace="2" border="1" alt="[IM Output]"></a> <a href="rose_23x15_02.gif"><img src="rose_23x15_02.gif" align="middle" vspace="4" hspace="2" border="1" alt="[IM Output]"></a> <a href="rose_23x15_03.gif"><img src="rose_23x15_03.gif" align="middle" vspace="4" hspace="2" border="1" alt="[IM Output]"></a><br>
                  <a href="rose_23x15_04.gif"><img src="rose_23x15_04.gif" align="middle" vspace="4" hspace="2" border="1" alt="[IM Output]"></a> <a href="rose_23x15_05.gif"><img src="rose_23x15_05.gif" align="middle" vspace="4" hspace="2" border="1" alt="[IM Output]"></a> <a href="rose_23x15_06.gif"><img src="rose_23x15_06.gif" align="middle" vspace="4" hspace="2" border="1" alt="[IM Output]"></a> <a href="rose_23x15_07.gif"><img src="rose_23x15_07.gif" align="middle" vspace="4" hspace="2" border="1" alt="[IM Output]"></a><br>
                  <a href="rose_23x15_08.gif"><img src="rose_23x15_08.gif" align="middle" vspace="4" hspace="2" border="1" alt="[IM Output]"></a> <a href="rose_23x15_09.gif"><img src="rose_23x15_09.gif" align="middle" vspace="4" hspace="2" border="1" alt="[IM Output]"></a> <a href="rose_23x15_10.gif"><img src="rose_23x15_10.gif" align="middle" vspace="4" hspace="2" border="1" alt="[IM Output]"></a> <a href="rose_23x15_11.gif"><img src="rose_23x15_11.gif" align="middle" vspace="4" hspace="2" border="1" alt="[IM Output]"></a><br>
                  <a href="rose_23x15_12.gif"><img src="rose_23x15_12.gif" align="middle" vspace="4" hspace="2" border="1" alt="[IM Output]"></a> <a href="rose_23x15_13.gif"><img src="rose_23x15_13.gif" align="middle" vspace="4" hspace="2" border="1" alt="[IM Output]"></a> <a href="rose_23x15_14.gif"><img src="rose_23x15_14.gif" align="middle" vspace="4" hspace="2" border="1" alt="[IM Output]"></a> <a href="rose_23x15_15.gif"><img src="rose_23x15_15.gif" align="middle" vspace="4" hspace="2" border="1" alt="[IM Output]"></a>
                </td>
              </tr>
            </table>
          </div>Well as you can see this did not work, because the rose image can not be exactly divided into 3 equally sized tiles. In this case you end up with a 1 pixel 'short' tile. Even if you expand the size of the tile to 24x16 pixels, you will still end up with a tile that is 2 pixels 'shorter' than the other tiles. This situation gets worse as the number of tiles wanted gets larger. For example try sub-dividing a length of 100 into 30 tiles. It is impossible. You either use a length of 3 and get 34 tiles, or 4 and get 25 tiles. Getting exactly 30 equal sized tiles is impossible! As of IM v6.5.8-9 you can now add the special '<code>@</code>' flag to the "<code><a href="../option_link.cgi?crop">-crop</a></code>" argument. This flag tells the "<code><a href="../option_link.cgi?crop">-crop</a></code>" operator to try its best to equally divide the image into the <i>number of tiles</i> given. For example...
          <div align="center">
            <table class="table table-sm table-hover table-striped" cellspacing="0" cellpadding="5" width="90%" bgcolor="#F8F8F8">
              <tr>
                <td>
                  <pre class="bg-light text-dark mx-4"><samp>
  magick rose: -crop 3x3@  +repage  +adjoin  rose_3x3@_%d.gif
</samp></pre>
                </td>
              </tr>
            </table>
            <table cellspacing="0" cellpadding="0">
              <tr>
                <td>
                  <a href="rose.gif"><img src="rose.gif" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a>
                </td>
                <td><img src="../img_www/right.gif" width="20" height="20" align="middle" alt="==&gt;"></td>
                <td>
                  <a href="rose_3x3@_0.gif"><img src="rose_3x3@_0.gif" align="middle" vspace="4" hspace="2" border="1" alt="[IM Output]"></a> <a href="rose_3x3@_1.gif"><img src="rose_3x3@_1.gif" align="middle" vspace="4" hspace="2" border="1" alt="[IM Output]"></a> <a href="rose_3x3@_2.gif"><img src="rose_3x3@_2.gif" align="middle" vspace="4" hspace="2" border="1" alt="[IM Output]"></a><br>
                  <a href="rose_3x3@_3.gif"><img src="rose_3x3@_3.gif" align="middle" vspace="4" hspace="2" border="1" alt="[IM Output]"></a> <a href="rose_3x3@_4.gif"><img src="rose_3x3@_4.gif" align="middle" vspace="4" hspace="2" border="1" alt="[IM Output]"></a> <a href="rose_3x3@_5.gif"><img src="rose_3x3@_5.gif" align="middle" vspace="4" hspace="2" border="1" alt="[IM Output]"></a><br>
                  <a href="rose_3x3@_6.gif"><img src="rose_3x3@_6.gif" align="middle" vspace="4" hspace="2" border="1" alt="[IM Output]"></a> <a href="rose_3x3@_7.gif"><img src="rose_3x3@_7.gif" align="middle" vspace="4" hspace="2" border="1" alt="[IM Output]"></a> <a href="rose_3x3@_8.gif"><img src="rose_3x3@_8.gif" align="middle" vspace="4" hspace="2" border="1" alt="[IM Output]"></a>
                </td>
              </tr>
            </table>
          </div>The result is that the image was divided into tiles which have slightly different sizes. However the tile size will differ by 1 pixel at the most! Check it out! As a bonus, you can also sub-divide the image so that each tile will 'overlap' its neighbours. You do this by not only using a '<code>@</code>' flag but also specifying the number of pixels of overlap you want. For example lets divide the rose into quarters but with a 20 pixel overlap.
          <div align="center">
            <table class="table table-sm table-hover table-striped" cellspacing="0" cellpadding="5" width="90%" bgcolor="#F8F8F8">
              <tr>
                <td>
                  <pre class="bg-light text-dark mx-4"><samp>
  magick rose: -crop 2x2+20+20@  +repage  +adjoin  rose_2x2+20+20@_%d.gif
</samp></pre>
                </td>
              </tr>
            </table>
            <table cellspacing="0" cellpadding="0">
              <tr>
                <td>
                  <a href="rose.gif"><img src="rose.gif" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a>
                </td>
                <td><img src="../img_www/right.gif" width="20" height="20" align="middle" alt="==&gt;"></td>
                <td>
                  <a href="rose_2x2+20+20@_0.gif"><img src="rose_2x2+20+20@_0.gif" align="middle" vspace="4" hspace="2" border="1" alt="[IM Output]"></a> <a href="rose_2x2+20+20@_1.gif"><img src="rose_2x2+20+20@_1.gif" align="middle" vspace="4" hspace="2" border="1" alt="[IM Output]"></a><br>
                  <a href="rose_2x2+20+20@_2.gif"><img src="rose_2x2+20+20@_2.gif" align="middle" vspace="4" hspace="2" border="1" alt="[IM Output]"></a> <a href="rose_2x2+20+20@_3.gif"><img src="rose_2x2+20+20@_3.gif" align="middle" vspace="4" hspace="2" border="1" alt="[IM Output]"></a>
                </td>
              </tr>
            </table>
          </div>Again all the pieces will only differ in size by one pixel at the most! Though in this case the resulting images are the same size, as the rose can divide by 2, equally. That however would not be the case if the overlap or the image was an odd number in size. In that case the bigger element will be along the top and left edge. With three tiles however the bigger (or smaller) element will be placed in the middle! You can even use a negative overlap to 'skip' exactly that many pixels between tiles! Exactly how you should apply the operator depends on exactly what pixels you want to 'overlap', or 'skip'. And that depends on the 'edge' characteristics of the image (see <a href="#crop_spaced">Separating Spaced-out Tiling Images</a> below). As with any use of the "<code><a href="../option_link.cgi?crop">-crop</a></code>" operator, it is recommended you use a "<code><a href="../option_link.cgi?repage">+repage</a></code> to remove the 'page' offset if it is not wanted. But the cropped image offset information can be very useful, which is why it is preserved. You can for example use it to name the output files, or find out the size and locations of the tiles that IM calculated. Note that equal sized tile cropping, is the only situation in which the "<code><a href="../option_link.cgi?crop">-crop</a></code>" operator ignores the actual virtual canvas of the image when figuring out what part of the image is cropped. That is, the calculations for tile cropping is based on real image size rather than virtual canvas size. Even so the final tile offsets will still be relative to the original virtual canvas. This crop option can also be used as an alternative to the <a href="#shave">Shave Operator</a> for 'paged' images.
          <table border="0" cellspacing="0" cellpadding="0" width="90%" align="center">
            <tr valign="top">
              <td><img src="../img_www/warning.gif" width="28" height="28"><img src="../img_www/space.gif" width="12" height="16"></td>
              <td align="justify" width="100%"><font size="-1"><i>Before IM version v6.6.1-0, equal-sized tile cropping for images with a virtual canvas offset was broken.</i></font></td>
            </tr>
          </table><a name="crop_spaced" id="crop_spaced"></a>
          <h3>Separating Spaced-out Tiling Images</h3>Often you have an image that has fixed sized tiles which are separated by a fixed amount of space. The new '<code>@</code>' flag crop operator will let you more easily crop out those tiles, either including or skipping the surrounding space. The main problem however is that while the 'tile' images have a fixed amount of space around them the amount of space around the edge is usually not so fixed. This produces three basic styles of edge characteristics to a set of 'spaced' images. and each type need to be handled slightly differently. <!--<CODE EXECUTE>
  magick font_[1-5].gif -bordercolor white -border 0 miff:- |\
    montage - -tile x1  -geometry +3+3 -background Lime  montage.gif
  magick montage.gif -trim +repage spaced.gif
  magick montage.gif -bordercolor Lime -border 3x3 edged.gif
</CODE>-->
          <b>Montaged Tiles</b>Here the original images were simply given a fixed sized border before being appended together. The result is that you will always have an even number of pixel spacing between tiles. More importantly the 'edge spacing' is exactly half the spacing that was placed between the tiles. This is in fact how the "<code><a href="../montage/">montage</a></code>" spaces the tiling 'cells', and it was using this command the example shown image below was generated. As the images were just simply tiled together you can use either a normal <a href="#crop_tile">Tile Cropping</a> (if you know the tile size), or use <a href="#crop_equal">Equal Sized Cropping</a> (if you know the number of tiles), to separate the sub-images and the surrounding border. There is basically no overlap between the tiles, and a simple <a href="#shave">Shave Operator</a>, can then be used to remove that border from the resulting tiles.
          <div align="center">
            <table class="table table-sm table-hover table-striped" cellspacing="0" cellpadding="5" width="90%" bgcolor="#F8F8F8">
              <tr>
                <td>
                  <pre class="bg-light text-dark mx-4"><samp>
  magick montage.gif -crop 5x1@ +repage +adjoin montage_%d.gif
  magick montage_?.gif -shave 3x3 montage-3_%d.gif
</samp></pre>
                </td>
              </tr>
            </table>
            <table cellspacing="0" cellpadding="0">
              <tr>
                <td>
                  <a href="montage.gif"><img src="montage.gif" align="middle" vspace="4" hspace="5" border="1" alt="[IM Output]"></a>
                </td>
                <td><img src="../img_www/right.gif" width="20" height="20" align="middle" alt="==&gt;"></td>
                <td>
                  <a href="montage_0.gif"><img src="montage_0.gif" align="middle" vspace="4" hspace="5" border="1" alt="[IM Output]"></a> <a href="montage_1.gif"><img src="montage_1.gif" align="middle" vspace="4" hspace="5" border="1" alt="[IM Output]"></a> <a href="montage_2.gif"><img src="montage_2.gif" align="middle" vspace="4" hspace="5" border="1" alt="[IM Output]"></a> <a href="montage_3.gif"><img src="montage_3.gif" align="middle" vspace="4" hspace="5" border="1" alt="[IM Output]"></a> <a href="montage_4.gif"><img src="montage_4.gif" align="middle" vspace="4" hspace="5" border="1" alt="[IM Output]"></a>
                </td>
              </tr>
              <tr>
                <td></td>
                <td><img src="../img_www/right.gif" width="20" height="20" align="middle" alt="==&gt;"></td>
                <td>
                  <a href="montage-3_0.gif"><img src="montage-3_0.gif" align="middle" vspace="4" hspace="8" border="1" alt="[IM Output]"></a> <a href="montage-3_1.gif"><img src="montage-3_1.gif" align="middle" vspace="4" hspace="8" border="1" alt="[IM Output]"></a> <a href="montage-3_2.gif"><img src="montage-3_2.gif" align="middle" vspace="4" hspace="8" border="1" alt="[IM Output]"></a> <a href="montage-3_3.gif"><img src="montage-3_3.gif" align="middle" vspace="4" hspace="8" border="1" alt="[IM Output]"></a> <a href="montage-3_4.gif"><img src="montage-3_4.gif" align="middle" vspace="4" hspace="8" border="1" alt="[IM Output]"></a>
                </td>
              </tr>
            </table>
          </div><b>Same Spacing around Edge</b>Here the sub-images were not only 'spaced-out' by 6 pixels but also has a 6 pixel spacing around the edge, making it look rather neat and tidy. This is handled by using the default <a href="#crop_equal">Equal Sized Cropping</a> with the appropriate amount of pixel 'overlap'. For example...
          <div align="center">
            <table class="table table-sm table-hover table-striped" cellspacing="0" cellpadding="5" width="90%" bgcolor="#F8F8F8">
              <tr>
                <td>
                  <pre class="bg-light text-dark mx-4"><samp>
  magick edged.gif -crop 5x1+6+6@ +repage +adjoin edged+6_%d.gif
</samp></pre>
                </td>
              </tr>
            </table>
            <table cellspacing="0" cellpadding="0">
              <tr>
                <td>
                  <a href="edged.gif"><img src="edged.gif" align="middle" vspace="4" hspace="5" border="1" alt="[IM Output]"></a>
                </td>
                <td><img src="../img_www/right.gif" width="20" height="20" align="middle" alt="==&gt;"></td>
                <td>
                  <a href="edged+6_0.gif"><img src="edged+6_0.gif" align="middle" vspace="4" hspace="5" border="1" alt="[IM Output]"></a> <a href="edged+6_1.gif"><img src="edged+6_1.gif" align="middle" vspace="4" hspace="5" border="1" alt="[IM Output]"></a> <a href="edged+6_2.gif"><img src="edged+6_2.gif" align="middle" vspace="4" hspace="5" border="1" alt="[IM Output]"></a> <a href="edged+6_3.gif"><img src="edged+6_3.gif" align="middle" vspace="4" hspace="5" border="1" alt="[IM Output]"></a> <a href="edged+6_4.gif"><img src="edged+6_4.gif" align="middle" vspace="4" hspace="5" border="1" alt="[IM Output]"></a>
                </td>
              </tr>
            </table>
          </div>Note how the operator separated the images so that they remain the same size, but with a 6 pixel overlap. This is specifically what it was designed to do. By using a negative offset, you tell IM that the overlapping area (spacing parts) should not be included in the final results.
          <div align="center">
            <table class="table table-sm table-hover table-striped" cellspacing="0" cellpadding="5" width="90%" bgcolor="#F8F8F8">
              <tr>
                <td>
                  <pre class="bg-light text-dark mx-4"><samp>
  magick edged.gif -crop 5x1-6-6@ +repage +adjoin edged-6_%d.gif
</samp></pre>
                </td>
              </tr>
            </table>
            <table cellspacing="0" cellpadding="0">
              <tr>
                <td>
                  <a href="edged.gif"><img src="edged.gif" align="middle" vspace="4" hspace="5" border="1" alt="[IM Output]"></a>
                </td>
                <td><img src="../img_www/right.gif" width="20" height="20" align="middle" alt="==&gt;"></td>
                <td>
                  <a href="edged-6_0.gif"><img src="edged-6_0.gif" align="middle" vspace="4" hspace="8" border="1" alt="[IM Output]"></a> <a href="edged-6_1.gif"><img src="edged-6_1.gif" align="middle" vspace="4" hspace="8" border="1" alt="[IM Output]"></a> <a href="edged-6_2.gif"><img src="edged-6_2.gif" align="middle" vspace="4" hspace="8" border="1" alt="[IM Output]"></a> <a href="edged-6_3.gif"><img src="edged-6_3.gif" align="middle" vspace="4" hspace="8" border="1" alt="[IM Output]"></a> <a href="edged-6_4.gif"><img src="edged-6_4.gif" align="middle" vspace="4" hspace="8" border="1" alt="[IM Output]"></a>
                </td>
              </tr>
            </table>
          </div>If I was to go further and subtract more pixels I can even trim some of the white border from the above numbers.
          <div align="center">
            <table class="table table-sm table-hover table-striped" cellspacing="0" cellpadding="5" width="90%" bgcolor="#F8F8F8">
              <tr>
                <td>
                  <pre class="bg-light text-dark mx-4"><samp>
  magick edged.gif -crop 5x1-8-8@ +repage +adjoin edged-8_%d.gif
</samp></pre>
                </td>
              </tr>
            </table>
            <table cellspacing="0" cellpadding="0">
              <tr>
                <td>
                  <a href="edged.gif"><img src="edged.gif" align="middle" vspace="4" hspace="5" border="1" alt="[IM Output]"></a>
                </td>
                <td><img src="../img_www/right.gif" width="20" height="20" align="middle" alt="==&gt;"></td>
                <td>
                  <a href="edged-8_0.gif"><img src="edged-8_0.gif" align="middle" vspace="4" hspace="8" border="1" alt="[IM Output]"></a> <a href="edged-8_1.gif"><img src="edged-8_1.gif" align="middle" vspace="4" hspace="8" border="1" alt="[IM Output]"></a> <a href="edged-8_2.gif"><img src="edged-8_2.gif" align="middle" vspace="4" hspace="8" border="1" alt="[IM Output]"></a> <a href="edged-8_3.gif"><img src="edged-8_3.gif" align="middle" vspace="4" hspace="8" border="1" alt="[IM Output]"></a> <a href="edged-8_4.gif"><img src="edged-8_4.gif" align="middle" vspace="4" hspace="8" border="1" alt="[IM Output]"></a>
                </td>
              </tr>
            </table>
          </div>You can even use this as an alternative method for the <a href="#shave">Shave Operator</a>, by simply specifying a 1 tile crop...
          <div align="center">
            <table class="table table-sm table-hover table-striped" cellspacing="0" cellpadding="5" width="90%" bgcolor="#F8F8F8">
              <tr>
                <td>
                  <pre class="bg-light text-dark mx-4"><samp>
  magick edged+6_0.gif -crop 1x1-6-6@ +repage tile-shave.gif
</samp></pre>
                </td>
              </tr>
            </table>
            <table cellspacing="0" cellpadding="0">
              <tr>
                <td>
                  <a href="edged+6_0.gif"><img src="edged+6_0.gif" align="middle" vspace="4" hspace="8" border="1" alt="[IM Output]"></a>
                </td>
                <td><img src="../img_www/right.gif" width="20" height="20" align="middle" alt="==&gt;"></td>
                <td>
                  <a href="tile-shave.gif"><img src="tile-shave.gif" align="middle" vspace="4" hspace="8" border="1" alt="[IM Output]"></a>
                </td>
              </tr>
            </table>
          </div><b>Simply Spaced Tiles</b>The simplest spaced-out tiled images has no edge spacing, or has had that edge spacing <a href="#trim">Trimmed</a> from the image. However for this to be handled you need to tell IM of this special situation, by including BOTH '<code>@</code>' and '<code>!</code>' flags.
          <div align="center">
            <table class="table table-sm table-hover table-striped" cellspacing="0" cellpadding="5" width="90%" bgcolor="#F8F8F8">
              <tr>
                <td>
                  <pre class="bg-light text-dark mx-4"><samp>
  magick spaced.gif -crop 5x1+6+6@\! +repage +adjoin spaced+6_%d.gif
</samp></pre>
                </td>
              </tr>
            </table>
            <table cellspacing="0" cellpadding="0">
              <tr>
                <td>
                  <a href="spaced.gif"><img src="spaced.gif" align="middle" vspace="4" hspace="5" border="1" alt="[IM Output]"></a>
                </td>
                <td><img src="../img_www/right.gif" width="20" height="20" align="middle" alt="==&gt;"></td>
                <td>
                  <a href="spaced+6_0.gif"><img src="spaced+6_0.gif" align="middle" vspace="4" hspace="5" border="1" alt="[IM Output]"></a> <a href="spaced+6_1.gif"><img src="spaced+6_1.gif" align="middle" vspace="4" hspace="5" border="1" alt="[IM Output]"></a> <a href="spaced+6_2.gif"><img src="spaced+6_2.gif" align="middle" vspace="4" hspace="5" border="1" alt="[IM Output]"></a> <a href="spaced+6_3.gif"><img src="spaced+6_3.gif" align="middle" vspace="4" hspace="5" border="1" alt="[IM Output]"></a> <a href="spaced+6_4.gif"><img src="spaced+6_4.gif" align="middle" vspace="4" hspace="5" border="1" alt="[IM Output]"></a>
                </td>
              </tr>
            </table>
          </div>Note that the images on the edges of this sub-division are slightly shorter than the images in the middle. This is why this special 'mode' of operation is NOT the default, even though it is actually simpler than the previous spaced-out tile category. Also note that when using both '<code>@</code>' and '<code>!</code>' flags, a single tile crop (vertically in this case) does not have any effect, as both the top and the bottom of the tile are 'edges', and thus has no 'edge space' to be removed. Again by using a negative value for the overlap, you can tell IM not to include the overlapping (spacing) area in the tile crop results.
          <div align="center">
            <table class="table table-sm table-hover table-striped" cellspacing="0" cellpadding="5" width="90%" bgcolor="#F8F8F8">
              <tr>
                <td>
                  <pre class="bg-light text-dark mx-4"><samp>
  magick spaced.gif -crop 5x1-6-6@\! +repage +adjoin spaced-6_%d.gif
</samp></pre>
                </td>
              </tr>
            </table>
            <table cellspacing="0" cellpadding="0">
              <tr>
                <td>
                  <a href="spaced.gif"><img src="spaced.gif" align="middle" vspace="4" hspace="5" border="1" alt="[IM Output]"></a>
                </td>
                <td><img src="../img_www/right.gif" width="20" height="20" align="middle" alt="==&gt;"></td>
                <td>
                  <a href="spaced-6_0.gif"><img src="spaced-6_0.gif" align="middle" vspace="4" hspace="8" border="1" alt="[IM Output]"></a> <a href="spaced-6_1.gif"><img src="spaced-6_1.gif" align="middle" vspace="4" hspace="8" border="1" alt="[IM Output]"></a> <a href="spaced-6_2.gif"><img src="spaced-6_2.gif" align="middle" vspace="4" hspace="8" border="1" alt="[IM Output]"></a> <a href="spaced-6_3.gif"><img src="spaced-6_3.gif" align="middle" vspace="4" hspace="8" border="1" alt="[IM Output]"></a> <a href="spaced-6_4.gif"><img src="spaced-6_4.gif" align="middle" vspace="4" hspace="8" border="1" alt="[IM Output]"></a>
                </td>
              </tr>
            </table>
          </div>
          <table border="0" cellspacing="0" cellpadding="0" width="90%" align="center">
            <tr valign="top">
              <td><img src="../img_www/reminder.gif" width="20" height="16"><img src="../img_www/space.gif" width="20" height="16"></td>
              <td align="justify" width="100%"><font size="-1"><i>The '<code>!</code>' character has special significance to some UNIX shells, like "<code>csh</code>", and must be escaped with a backslash, even when placed inside quotes.</i></font></td>
            </tr>
          </table>With these formulas you should should now be able to tile crop images that form a grid, even when the images are overlapping, or spaced out. Even if the specific problem you have does not fall exactly into on of the above cases, you should be able to either add or remove edge pixels appropriately so that the image does fall into one of the above categories of spaced-out images.<br>
          <hr>
          <!-- ---------------------------------------------------------------- -->
          <a name="border" id="border"></a>
          <h2>Adding/Removing Image Edges</h2>
          <h3>Border, adding space around the image</h3>Often you simply want to add a little working space around the edge of an image, but you don't want to need or depend on knowing the size of an image to do so. Now there are many ways to add extra space to an image, outside of direct space additions, including <a href="../layers/#append">appending blank images or labels</a>, <a href="../compose/#src">composing '<code>Src</code>' overlays</a>, or even just <a href="../layers/#flatten">positioning the image on a larger canvas</a>. But these methods usually need at least some idea of how big the image you are working with actually is. One of the simplest form of image space additions is "<code><a href="../option_link.cgi?border">-border</a></code>" operation. The color of the space added is "<code><a href="../option_link.cgi?bordercolor">-bordercolor</a></code>" setting. Here is some straight forward examples..
          <div align="center">
            <table class="table table-sm table-hover table-striped" cellspacing="0" cellpadding="5" width="90%" bgcolor="#F8F8F8">
              <tr>
                <td>
                  <pre class="bg-light text-dark mx-4"><samp>
  magick rose: -bordercolor SkyBlue    -border 10x10 border.gif
  magick rose:                         -border 15x6  border_default.gif
  magick rose: -bordercolor LimeGreen  -border 10x0  border_sides.gif
  magick rose: -bordercolor Tomato     -border  0x10 border_topbot.gif
  magick rose: -alpha set -bordercolor none -border 10    border_none.gif
</samp></pre>
                </td>
              </tr>
            </table><a href="border.gif"><img src="border.gif" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a> <a href="border_default.gif"><img src="border_default.gif" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a> <a href="border_sides.gif"><img src="border_sides.gif" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a> <a href="border_topbot.gif"><img src="border_topbot.gif" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a> <a href="border_none.gif"><img src="border_none.gif" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a>
          </div>Note last example image above. The border color was set to be the transparent color "<code>none</code>", but for this to work as expected we needed to ensure the image actually contained a 'matte' or 'alpha' channel. Also note that is the vertical and horizontal border sizes are the same you can omit the second number in the border, using just a single number.
          <table border="0" cellspacing="0" cellpadding="0" width="90%" align="center">
            <tr valign="top">
              <td><img src="../img_www/reminder.gif" width="20" height="16"><img src="../img_www/space.gif" width="20" height="16"></td>
              <td align="justify" width="100%"><font size="-1"><i>As shown above the default color used by the "<code><a href="../option_link.cgi?border">-border</a></code>" operator is a light gray as it matches nicely the default grey page color of web pages on the WWW.</i></font></td>
            </tr>
          </table>You can specify borders as a percentage of the image size...
          <table border="0" cellspacing="0" cellpadding="0" width="100%">
            <tr>
              <td width="100%" align="justify">
                <table class="table table-sm table-hover table-striped" cellspacing="0" cellpadding="5" width="100%" bgcolor="#F8F8F8">
                  <tr>
                    <td>
                      <pre class="bg-light text-dark mx-4"><samp>
  magick rose: -border 10%x10%  border_percent.jpg
</samp></pre>
                    </td>
                  </tr>
                </table>
              </td>
              <td>
                <a href="border_percent.jpg"><img src="border_percent.jpg" align="middle" vspace="0" hspace="5" border="1" alt="[IM Output]"></a>
              </td>
            </tr>
          </table>Internally what is really happening is that "<code><a href="../option_link.cgi?border">-border</a></code>" creates a new image of the right size, then overlays the original source image over this new background. This is itself a very useful operation in ImageMagick, for setting the background of transparent and semi-transparent images. That is, the seemingly useless "<code>-border 0</code>" operation is, in IM version 6, a very useful one. For example...
          <div align="center">
            <table class="table table-sm table-hover table-striped" cellspacing="0" cellpadding="5" width="90%" bgcolor="#F8F8F8">
              <tr>
                <td>
                  <pre class="bg-light text-dark mx-4"><samp>
  magick star.gif -bordercolor LimeGreen -border 0  star_background.gif
</samp></pre>
                </td>
              </tr>
            </table><a href="../images/star.gif"><img src="../images/star.gif" align="middle" vspace="2" hspace="25" border="0" alt="[IM Output]"></a> <img src="../img_www/right.gif" width="20" height="20" align="middle" alt="==&gt;"> <a href="star_background.gif"><img src="star_background.gif" align="middle" vspace="2" hspace="25" border="0" alt="[IM Output]"></a>
          </div>Of course there are lots of other ways to <a href="../masking/#remove">Remove Alpha Transparency</a>.
          <table border="0" cellspacing="0" cellpadding="0" width="90%" align="center">
            <tr valign="top">
              <td><img src="../img_www/reminder.gif" width="20" height="16"><img src="../img_www/space.gif" width="20" height="16"></td>
              <td align="justify" width="100%"><font size="-1"><i>The fact that adding a border to images with transparency, also by default fills the transparent background of the image, has been the cause of some debate amongst IM users and the development team. A summary of this debate is given on <a href="../misc/#border">Border, Frame and use of BorderColor</a>.</i></font></td>
            </tr>
          </table><a name="border_compose" id="border_compose"></a>
          <h4>Border and Alpha Composition</h4>The overlay of the image onto the bordercolor canvas is controlled by the "<code><a href="../option_link.cgi?compose">-compose</a></code>" setting, which by default is set to '<code><a href="../compose/#over">Over</a></code>' alpha compositing. If it is set to come other setting, the "<code><a href="../option_link.cgi?border">-border</a></code>" operation may produce unexpected results. For example, here are some of the more interesting uses of "<code><a href="../option_link.cgi?compose">-compose</a></code>" with the "<code><a href="../option_link.cgi?border">-border</a></code>" image operator, when applied to an image containing some transparent areas.
          <div align="center">
            <table class="table table-sm table-hover table-striped" cellspacing="0" cellpadding="5" width="90%" bgcolor="#F8F8F8">
              <tr>
                <td>
                  <pre class="bg-light text-dark mx-4"><samp>
  magick star.gif -bordercolor LimeGreen \
                   -compose {<i>operation</i>} -border 5  {<i>result</i>}
</samp></pre>
                </td>
              </tr>
            </table><a href="border_compose.jpg"><img src="border_compose.jpg" align="middle" vspace="2" hspace="5" border="0" alt="[IM Output]"></a>
          </div>The choice between using '<code>Over</code>' and '<code>Copy</code>' essentially decides if you want to preserve the transparency in the image or not. For example, here is the same 'star' image with transparency, but this time the border was added without destroying the images transparency.
          <table border="0" cellspacing="0" cellpadding="0" width="100%">
            <tr>
              <td width="100%" align="justify">
                <table class="table table-sm table-hover table-striped" cellspacing="0" cellpadding="5" width="100%" bgcolor="#F8F8F8">
                  <tr>
                    <td>
                      <pre class="bg-light text-dark mx-4"><samp>
  magick star.gif  -bordercolor LimeGreen   -compose Copy \
                     -border 5     star_border_copy.gif
</samp></pre>
                    </td>
                  </tr>
                </table>
              </td>
              <td>
                <a href="star_border_copy.gif"><img src="star_border_copy.gif" align="middle" vspace="2" hspace="2" border="1" alt="[IM Output]"></a>
              </td>
            </tr>
          </table>The '<code><a href="../compose/#src">Src</a></code>' compose will add a transparent border to an image (if it has an alpha channel), regardless of the current "<code><a href="../option_link.cgi?bordercolor">-bordercolor</a></code>" setting. Basically the background canvas "<code><a href="../option_link.cgi?border">-border</a></code>" generated is ignored. The '<code><a href="../compose/#dst">Dst</a></code>' may not seem to be very useful, but can be used to generate a canvas the same size (or a little bigger) than the original image. The original image is only used to determine the final size of the canvas. For more examples see <a href="../canvas/#sized">Canvases Sized to an Existing Image</a>. For more information on the various "<code><a href="../option_link.cgi?compose">-compose</a></code>" methods see the <a href="../compose/">Alpha Compositing Examples</a>. <a name="border_canvas" id="border_canvas"></a>
          <h4>Border and Virtual Canvas</h4>When "<code><a href="../option_link.cgi?border">-border</a></code>" is applied to an image containing a virtual canvas, it will still add the border around the actual image on that virtual canvas, and NOT around the whole canvas.
          <div align="center">
            <table class="table table-sm table-hover table-striped" cellspacing="0" cellpadding="5" width="90%" bgcolor="#F8F8F8">
              <tr>
                <td>
                  <pre class="bg-light text-dark mx-4"><samp>
<br>  magick rose: -shave 12x0 -repage 64x64+9+9  paged.gif
<br>  magick paged.gif         -border 5x5        paged_border.gif
</samp></pre>
                </td>
              </tr>
            </table><a href="paged.gif"><img src="paged.gif" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a> <img src="../img_www/right.gif" width="20" height="20" align="middle" alt="==&gt;"> <a href="paged_border.gif"><img src="paged_border.gif" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a>
          </div>Note that the size of the virtual canvas was also increased by twice the border thickness to accommodate the added border. This of course means you can not simply add a <a href="#border">Border</a> to a typical GIF animation directly, unless you want to actually identify the individual sub-frames of the animation (for example see the script <a href="../anim_basics/#montage">Animation Frame Montage</a> which uses this as an option to 'frame' the overlay images). If you want to add a border, you should <a href="../anim_basics/#coalesce">Coalesce</a> the animation first to remove any <a href="../anim_opt/#frame_opt">Frame Optimizations</a> it may have first. <a name="frame" id="frame"></a>
          <h3>Frame, adding a 3D-like border</h3>The "<code><a href="../option_link.cgi?frame">-frame</a></code>" operator is very similar to "<code><a href="../option_link.cgi?border">-border</a></code>", and if you look at the first example image generated below, you will find that it will produce exactly the same result, except it used the "<code><a href="../option_link.cgi?mattecolor">-mattecolor</a></code>" rather than "<code><a href="../option_link.cgi?bordercolor">-bordercolor</a></code>". Note "<code><a href="../option_link.cgi?bordercolor">-bordercolor</a></code>" is still used in the generation framed images, see below. To use "<code><a href="../option_link.cgi?frame">-frame</a></code>" properly you need to supply four arguments to the command, instead of just 2. The extra arguments specify the width of the 'outside' and 'inside' bevels of the frame being produced. Here are some examples of using the "<code><a href="../option_link.cgi?frame">-frame</a></code>" operator with various settings.
          <div align="center">
            <table class="table table-sm table-hover table-striped" cellspacing="0" cellpadding="5" width="90%" bgcolor="#F8F8F8">
              <tr>
                <td>
                  <pre class="bg-light text-dark mx-4"><samp>
  magick rose:                    -frame 10x10      frame.gif
  magick rose:                    -frame 15x6+2+2   frame_wierd.gif
  magick rose: -mattecolor SkyBlue -frame 6x6+2+2    frame_blue.gif
  magick rose: -mattecolor Tomato  -frame 10x10+5+5  frame_red.gif

  magick rose:   -frame 10x10+10+0    frame_rasied.gif
  magick rose:   -frame 10x10+6+0     frame_rasied_part.gif
  magick rose:   -frame 10x10+0+6     frame_sunken_part.gif
  magick rose:   -frame 10x10+0+10    frame_sunken.gif
</samp></pre>
                </td>
              </tr>
            </table><a href="frame.gif"><img src="frame.gif" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a> <a href="frame_wierd.gif"><img src="frame_wierd.gif" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a> <a href="frame_blue.gif"><img src="frame_blue.gif" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a> <a href="frame_red.gif"><img src="frame_red.gif" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a><br>
            <a href="frame_rasied.gif"><img src="frame_rasied.gif" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a> <a href="frame_rasied_part.gif"><img src="frame_rasied_part.gif" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a> <a href="frame_sunken_part.gif"><img src="frame_sunken_part.gif" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a> <a href="frame_sunken.gif"><img src="frame_sunken.gif" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a>
          </div>Using multiple frame operations can also produce weirder framing styles.
          <div align="center">
            <table class="table table-sm table-hover table-striped" cellspacing="0" cellpadding="5" width="90%" bgcolor="#F8F8F8">
              <tr>
                <td>
                  <pre class="bg-light text-dark mx-4"><samp>
  magick rose:      -frame 10x10+3+3                    frame_normal.gif
  magick rose:      -frame 3x3+3+0      -frame 7x7+3+0  frame_popped.gif
  magick rose:      -frame 7x7+0+3      -frame 3x3+0+3  frame_pressed.gif
  magick rose: -frame 3x3+3+0 -frame 4x4 -frame 3x3+0+3  frame_inverted.gif
</samp></pre>
                </td>
              </tr>
            </table><a href="frame_normal.gif"><img src="frame_normal.gif" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a> <a href="frame_popped.gif"><img src="frame_popped.gif" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a> <a href="frame_pressed.gif"><img src="frame_pressed.gif" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a> <a href="frame_inverted.gif"><img src="frame_inverted.gif" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a>
          </div>
          <table border="0" cellspacing="0" cellpadding="0" width="90%" align="center">
            <tr valign="top">
              <td><img src="../img_www/reminder.gif" width="20" height="16"><img src="../img_www/space.gif" width="20" height="16"></td>
              <td align="justify" width="100%"><font size="-1"><i>The default "<code><a href="../option_link.cgi?mattecolor">-mattecolor</a></code>" is a slightly darker gray than that of the default setting of "<code><a href="../option_link.cgi?bordercolor">-bordercolor</a></code>". This also allows it to match the default gray color of web pages on the WWW (used by early browsers such as "<code>mosaic</code>" and "<code>netscape</code>". (See below)</i></font></td>
            </tr>
          </table>
          <table border="0" cellspacing="0" cellpadding="0" width="90%" align="center">
            <tr valign="top">
              <td><img src="../img_www/expert.gif" width="23" height="26"><img src="../img_www/space.gif" width="17" height="16"></td>
              <td align="justify" width="100%"><font size="-1"><i>While "<code><a href="../option_link.cgi?frame">-frame</a></code>" may actually use the "<code><a href="../option_link.cgi?mattecolor">-mattecolor</a></code>" color, it also generates four more extra colors from this base for use in drawing the frame. That is, five related colors will likely be added to an image, not just one.</i></font></td>
            </tr>
          </table><a name="frame_montage" id="frame_montage"></a> With some effort you can even reproduce a "<code>magick montage</code>"-like framed image complete with text label.
          <table border="0" cellspacing="0" cellpadding="0" width="100%">
            <tr>
              <td width="100%" align="justify">
                <table class="table table-sm table-hover table-striped" cellspacing="0" cellpadding="5" width="100%" bgcolor="#F8F8F8">
                  <tr>
                    <td>
                      <pre class="bg-light text-dark mx-4"><samp>
  magick rose:  -mattecolor grey  -background grey  -frame 3x3+0+3 \
          -gravity South -splice 0x15 -annotate 0x0 'A Red Rose' \
          -frame 6x6+3+0    frame_montage.gif
</samp></pre>
                    </td>
                  </tr>
                </table>
              </td>
              <td>
                <a href="frame_montage.gif"><img src="frame_montage.gif" align="middle" vspace="2" hspace="5" border="1" alt="[IM Output]"></a>
              </td>
            </tr>
          </table><a name="frame_plasma" id="frame_plasma"></a> You can even use a semi-transparent "<code><a href="../option_link.cgi?mattecolor">-mattecolor</a></code>" for the frame "<code><a href="../option_link.cgi?frame">-frame</a></code>" and then 'underlay' an interesting pattern (such as a <a href="../canvas/#plasma_fractal">Fractal Plasma Canvas</a>), to produce a more colorful frame.
          <table border="0" cellspacing="0" cellpadding="0" width="100%">
            <tr>
              <td width="100%" align="justify">
                <table class="table table-sm table-hover table-striped" cellspacing="0" cellpadding="5" width="100%" bgcolor="#F8F8F8">
                  <tr>
                    <td>
                      <pre class="bg-light text-dark mx-4"><samp>
<br>  magick rose: -alpha set -mattecolor '#CCC6' -frame 10x10+3+4 \
          \( -size 100x100 plasma:fractal -normalize -blur 0x1 \) \
          -compose DstOver -composite   frame_plasma.gif
</samp></pre>
                    </td>
                  </tr>
                </table>
              </td>
              <td>
                <a href="frame_plasma.gif"><img src="frame_plasma.gif" align="middle" vspace="2" hspace="5" border="1" alt="[IM Output]"></a>
              </td>
            </tr>
          </table>Alternatively you can color the frame separately, (generated using a special '<a href="../compose/#dst">Dst</a>' composition setting), then overlay the picture into the frame once you have it colored. But that is getting very tricky indeed. For more advanced techniques of using frames see <a href="../thumbnails/#frame">Framing Techniques</a>. <a name="frame_border" id="frame_border"></a>
          <h4>Frame and Alpha Composition</h4>Frame is closely related to the "<code><a href="../option_link.cgi?border">-border</a></code>" operator. Not only is a frame drawn using the "<code><a href="../option_link.cgi?mattecolor">-mattecolor</a></code>", but this operator will also make use of the "<code><a href="../option_link.cgi?bordercolor">-bordercolor</a></code>" setting to define the background on which the frame is initially drawn. Now for images which have no transparency, the "<code><a href="../option_link.cgi?bordercolor">-bordercolor</a></code>" will not be visible, as it is overlaid by the image itself. But for images that do contain some transparent areas, the background color does become visible.
          <table border="0" cellspacing="0" cellpadding="0" width="100%">
            <tr>
              <td width="100%" align="justify">
                <table class="table table-sm table-hover table-striped" cellspacing="0" cellpadding="5" width="100%" bgcolor="#F8F8F8">
                  <tr>
                    <td>
                      <pre class="bg-light text-dark mx-4"><samp>
  magick star.gif  -frame 6x6+2+2 star_framed.gif
</samp></pre>
                    </td>
                  </tr>
                </table>
              </td>
              <td>
                <a href="star_framed.gif"><img src="star_framed.gif" width="64" height="64" align="middle" vspace="5" hspace="2" border="1" alt="[IM Output]"></a>
              </td>
            </tr>
          </table>In other words "<code><a href="../option_link.cgi?frame">-frame</a></code>" acts as if you take your image and overlay it on a picture frame with a solid color background. As such any part of your image that is transparent will be replaced by the "<code><a href="../option_link.cgi?bordercolor">-bordercolor</a></code>" which by default is a light grey color.
          <table border="0" cellspacing="0" cellpadding="0" width="90%" align="center">
            <tr valign="top">
              <td><img src="../img_www/reminder.gif" width="20" height="16"><img src="../img_www/space.gif" width="20" height="16"></td>
              <td align="justify" width="100%"><font size="-1"><i>The fact that adding a frame to images with transparency, also by default fills the transparent background of the image with the bordercolor has caused some debate amongst IM users and the Development team. A summary of this debate is given on <a href="../misc/#border">Border, Frame and use of BorderColor</a>.</i></font></td>
            </tr>
          </table>If you want to preserve the transparency of the image, while framing it, you have two solutions. The first is to used transparent "<code><a href="../option_link.cgi?bordercolor">-bordercolor</a></code>" such as '<code>none</code>'.
          <table border="0" cellspacing="0" cellpadding="0" width="100%">
            <tr>
              <td width="100%" align="justify">
                <table class="table table-sm table-hover table-striped" cellspacing="0" cellpadding="5" width="100%" bgcolor="#F8F8F8">
                  <tr>
                    <td>
                      <pre class="bg-light text-dark mx-4"><samp>
  magick star.gif -bordercolor none  -frame 6x6+2+2  star_framed_none.gif
</samp></pre>
                    </td>
                  </tr>
                </table>
              </td>
              <td>
                <a href="star_framed_none.gif"><img src="star_framed_none.gif" width="64" height="64" align="middle" vspace="2" hspace="2" border="1" alt="[IM Output]"></a>
              </td>
            </tr>
          </table>The other solution and the preferred method is ensure the transparent pixels are preserved when the image is added to the frame. This is done by using a special "<code><a href="../option_link.cgi?compose">-compose</a></code>" method called '<code><a href="../compose/#copy">Copy</a></code>'.
          <table border="0" cellspacing="0" cellpadding="0" width="100%">
            <tr>
              <td width="100%" align="justify">
                <table class="table table-sm table-hover table-striped" cellspacing="0" cellpadding="5" width="100%" bgcolor="#F8F8F8">
                  <tr>
                    <td>
                      <pre class="bg-light text-dark mx-4"><samp>
  magick star.gif -compose Copy  -frame 6x6+2+2  star_framed_copy.gif
</samp></pre>
                    </td>
                  </tr>
                </table>
              </td>
              <td>
                <a href="star_framed_copy.gif"><img src="star_framed_copy.gif" width="64" height="64" align="middle" vspace="2" hspace="2" border="1" alt="[IM Output]"></a>
              </td>
            </tr>
          </table>
          <table border="0" cellspacing="0" cellpadding="0" width="90%" align="center">
            <tr valign="top">
              <td><img src="../img_www/warning.gif" width="28" height="28"><img src="../img_www/space.gif" width="12" height="16"></td>
              <td align="justify" width="100%"><font size="-1"><i>The use of "<a href="../option_link.cgi?bordercolor">-bordercolor</a></i>" as the background image for both "<code><a href="../option_link.cgi?border">-border</a></code>" and "<code><a href="../option_link.cgi?frame">-frame</a></code>" was added to IM with version 6.1.4. Before this the background canvas generated consisted of a black canvas onto which the border, or frame was drawn.<br>
              <br>
              This use of black was especially bad for the "<code>magick montage</code>" command which makes heavy usage of the internal "<code><a href="../option_link.cgi?frame">-frame</a></code>" function in its internal processing. (See <a href="../montage/#bg">Montage Background and Transparency Handling</a>)</font></td>
            </tr>
          </table><a name="frame_compose" id="frame_compose"></a> As you can see the "<code><a href="../option_link.cgi?frame">-frame</a></code>" operator, like "<code><a href="../option_link.cgi?border">-border</a></code>", also uses the "<code><a href="../option_link.cgi?compose">-compose</a></code>" setting to define how the source image is overlaid onto the background frame.
          <div align="center">
            <table class="table table-sm table-hover table-striped" cellspacing="0" cellpadding="5" width="90%" bgcolor="#F8F8F8">
              <tr>
                <td>
                  <pre class="bg-light text-dark mx-4"><samp>
  magick star.gif -bordercolor LimeGreen \
          -compose {<i>operation</i>} -frame 6x6+2+2  {<i>result</i>}
</samp></pre>
                </td>
              </tr>
            </table><a href="frame_compose.jpg"><img src="frame_compose.jpg" align="middle" vspace="2" hspace="2" border="0" alt="[IM Output]"></a>
          </div>The use of a "<code><a href="../option_link.cgi?compose">-compose</a></code>" setting of '<code><a href="../compose/#copy">Copy</a></code>' becomes very important if you also want to use the "<code><a href="../option_link.cgi?bordercolor">-bordercolor</a></code>" setting in "<code>magick montage</code>" frames. See <a href="../montage/#bg">Montage Background and Transparency Handling</a> for more details. <a name="frame_canvas" id="frame_canvas"></a>
          <h4>Frame and Virtual Canvas</h4>As with <a href="#border_canvas">Border and Virtual Canvas</a> frame is also applied around the actual image on that virtual canvas, and NOT around the whole canvas.
          <div align="center">
            <table class="table table-sm table-hover table-striped" cellspacing="0" cellpadding="5" width="90%" bgcolor="#F8F8F8">
              <tr>
                <td>
                  <pre class="bg-light text-dark mx-4"><samp>
<br>  magick rose: -shave 12x0 -repage 64x64+9+9  paged.gif
<br>  magick paged.gif         -frame 5x5+2+2     paged_framed.gif
</samp></pre>
                </td>
              </tr>
            </table><a href="paged.gif"><img src="paged.gif" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a> <img src="../img_www/right.gif" width="20" height="20" align="middle" alt="==&gt;"> <a href="paged_framed.gif"><img src="paged_framed.gif" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a>
          </div>Note that the size of the virtual canvas was also increased by twice the border thickness to accommodate the added frame. This of course means you can not simply add a <a href="#frame">Frame</a> to a typical GIF animation directly, unless you want to actually identify the individual sub-frames of the animation (for example see <a href="../anim_basics/#montage">Animation Frame Montage</a>). If you want to add a border, you should <a href="../anim_basics/#coalesce">Coalesce</a> the animation first to remove any <a href="../anim_opt/#frame_opt">Frame Optimizations</a> it may have first. <a name="shave" id="shave"></a>
          <h3>Shave, removing edges from an image</h3>The reverse of the "<code><a href="../option_link.cgi?border">-border</a></code>" or "<code><a href="../option_link.cgi?frame">-frame</a></code>" operators, is "<code><a href="../option_link.cgi?shave">-shave</a></code>", which if given the same arguments, will remove the space added by these commands.
          <div align="center">
            <table class="table table-sm table-hover table-striped" cellspacing="0" cellpadding="5" width="90%" bgcolor="#F8F8F8">
              <tr>
                <td>
                  <pre class="bg-light text-dark mx-4"><samp>
  magick border.gif -shave 10x10 shave.gif
  magick border.gif -shave 10x0  shave_sides.gif
  magick border.gif -shave  0x20 shave_topbot.gif
</samp></pre>
                </td>
              </tr>
            </table><a href="border.gif"><img src="border.gif" align="middle" vspace="5" hspace="5" border="1" alt="[IM Output]"></a> <img src="../img_www/right.gif" width="20" height="20" align="middle" alt="==&gt;"> <a href="shave.gif"><img src="shave.gif" align="middle" vspace="5" hspace="5" border="1" alt="[IM Output]"></a> <a href="shave_sides.gif"><img src="shave_sides.gif" align="middle" vspace="5" hspace="20" border="1" alt="[IM Output]"></a> <a href="shave_topbot.gif"><img src="shave_topbot.gif" align="middle" vspace="5" hspace="5" border="1" alt="[IM Output]"></a>
          </div>The main thing to keep in mind about these three operators is that they add and remove space on <i>opposite</i> sides of the images, not just one side, or adjacent sides. If you want to only remove one edge of an image, then you will need to use the "<code><a href="../option_link.cgi?chop">-chop</a></code>" operator instead. (See the <a href="#chop">Chop Examples</a> below). As before all the operators "<code><a href="../option_link.cgi?border">-border</a></code>", "<code><a href="../option_link.cgi?frame">-frame</a></code>", and "<code><a href="../option_link.cgi?shave">-shave</a></code>", only effect the real image on the virtual canvas and not the virtual canvas itself.
          <div align="center">
            <table class="table table-sm table-hover table-striped" cellspacing="0" cellpadding="5" width="90%" bgcolor="#F8F8F8">
              <tr>
                <td>
                  <pre class="bg-light text-dark mx-4"><samp>
<br>  magick rose: -shave 12x0 -repage 64x64+9+9  paged.gif
<br>  magick paged.gif         -border 5x5        paged_border.gif
<br>  magick paged_border.gif  -frame  5x5+2+2    paged_frame.gif
<br>  magick paged_frame.gif   -shave  10x10      paged_shave.gif
</samp></pre>
                </td>
              </tr>
            </table><a href="paged.gif"><img src="paged.gif" align="middle" vspace="5" hspace="5" border="1" alt="[IM Output]"></a> <img src="../img_www/right.gif" width="20" height="20" align="middle" alt="==&gt;"> <a href="paged_border.gif"><img src="paged_border.gif" align="middle" vspace="5" hspace="5" border="1" alt="[IM Output]"></a> <img src="../img_www/right.gif" width="20" height="20" align="middle" alt="==&gt;"> <a href="paged_frame.gif"><img src="paged_frame.gif" align="middle" vspace="5" hspace="5" border="1" alt="[IM Output]"></a> <img src="../img_www/right.gif" width="20" height="20" align="middle" alt="==&gt;"> <a href="paged_shave.gif"><img src="paged_shave.gif" align="middle" vspace="5" hspace="5" border="1" alt="[IM Output]"></a>
          </div>An alternative to using shave is to use the new <a href="#crop_equal">Equal Sized Tile Cropping</a> operator. The advantage of this operator is that unlike "<code><a href="../option_link.cgi?shave">-shave</a></code> it will not modify the canvas size of the resulting image.
          <div align="center">
            <table class="table table-sm table-hover table-striped" cellspacing="0" cellpadding="5" width="90%" bgcolor="#F8F8F8">
              <tr>
                <td>
                  <pre class="bg-light text-dark mx-4"><samp>
  magick paged_frame.gif   -crop  1x1-10-10@     paged_tile_shave.gif
</samp></pre>
                </td>
              </tr>
            </table><a href="paged_frame.gif"><img src="paged_frame.gif" align="middle" vspace="5" hspace="5" border="1" alt="[IM Output]"></a> <img src="../img_www/right.gif" width="20" height="20" align="middle" alt="==&gt;"> <a href="paged_tile_shave.gif"><img src="paged_tile_shave.gif" align="middle" vspace="5" hspace="5" border="1" alt="[IM Output]"></a>
          </div>
          <table border="0" cellspacing="0" cellpadding="0" width="90%" align="center">
            <tr valign="top">
              <td><img src="../img_www/warning.gif" width="28" height="28"><img src="../img_www/space.gif" width="12" height="16"></td>
              <td align="justify" width="100%"><font size="-1"><i>Before IM version v6.6.1-0, equal-sized tile cropping for images with a canvas offset (such as the above) was broken.</i></font></td>
            </tr>
          </table><a name="extent" id="extent"></a>
          <h3>Extent, Direct Image Size Adjustment</h3>After some discussions, an operator to directly adjust the final size of an image size was added to IM version 6.2.4. The "<code><a href="../option_link.cgi?extent">-extent</a></code>" operator. If the image size increases, space will be added to right or bottom edges of the image. If it decreases the image data is just junked or cropped to fit the new image size. In both cases the top left area of the image will likely remain unaffected.
          <div align="center">
            <table class="table table-sm table-hover table-striped" cellspacing="0" cellpadding="5" width="90%" bgcolor="#F8F8F8">
              <tr>
                <td>
                  <pre class="bg-light text-dark mx-4"><samp>
  magick rose: -background skyblue -extent 100x60     extent_enlarge.gif
  magick rose: -background skyblue -extent  40x40     extent_shrink.gif
  magick rose: -background skyblue -extent 100x40     extent_wider.gif
  magick rose: -background skyblue -extent  40x60     extent_taller.gif
</samp></pre>
                </td>
              </tr>
            </table><a href="extent_enlarge.gif"><img src="extent_enlarge.gif" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a> <a href="extent_shrink.gif"><img src="extent_shrink.gif" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a> <a href="extent_wider.gif"><img src="extent_wider.gif" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a> <a href="extent_taller.gif"><img src="extent_taller.gif" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a>
          </div>As you can see it will fill any new areas with the "<code><a href="../option_link.cgi?background">-background</a></code>" color of any new areas added to the image.
          <table border="0" cellspacing="0" cellpadding="0" width="90%" align="center">
            <tr valign="top">
              <td><img src="../img_www/warning.gif" width="28" height="28"><img src="../img_www/space.gif" width="12" height="16"></td>
              <td align="justify" width="100%"><font size="-1"><i>Before IM version v6.3.2, "<code><a href="../option_link.cgi?extent">-extent</a></code>" just cleared the memory of any new areas to zero, or straight black. It did not fill the areas with "<code><a href="../option_link.cgi?background">-background</a></code>" color.</i></font></td>
            </tr>
          </table>Also after IM v6.3.2, "<code><a href="../option_link.cgi?extent">-extent</a></code>" will use the "<code><a href="../option_link.cgi?gravity">-gravity</a></code>" to define where the areas added/removed are positioned relative to the original image.
          <div align="center">
            <table class="table table-sm table-hover table-striped" cellspacing="0" cellpadding="5" width="90%" bgcolor="#F8F8F8">
              <tr>
                <td>
                  <pre class="bg-light text-dark mx-4"><samp>
  magick rose: -gravity north  -extent 100x80 extent_north.gif
  magick rose: -gravity south  -extent 100x80 extent_south.gif
  magick rose: -gravity east   -extent 100x80 extent_east.gif
  magick rose: -gravity west   -extent 100x80 extent_west.gif
  magick rose: -gravity center -extent 100x80 extent_center.gif
  magick rose: -gravity center -extent  40x80  extent_center2.gif
</samp></pre>
                </td>
              </tr>
            </table><a href="extent_north.gif"><img src="extent_north.gif" width="100" height="80" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a> <a href="extent_south.gif"><img src="extent_south.gif" width="100" height="80" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a> <a href="extent_east.gif"><img src="extent_east.gif" width="100" height="80" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a> <a href="extent_west.gif"><img src="extent_west.gif" width="100" height="80" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a> <a href="extent_center.gif"><img src="extent_center.gif" width="100" height="80" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a> <a href="extent_center2.gif"><img src="extent_center2.gif" width="40" height="80" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a>
          </div>The last example in the above show that extent can also do centered crops, but without the need for a "<code><a href="../option_link.cgi?repage">-repage</a></code>", though it does 'flatten' the image with the current "<code><a href="../option_link.cgi?background">-background</a></code>" color.
          <table border="0" cellspacing="0" cellpadding="0" width="100%">
            <tr>
              <td width="100%" align="justify">
                You can even use offsets, which basically means the <a href="#extent">Extent Operator</a> is simply a straight forward <a href="#crop">Crop</a> with background padded fill, regardless of position.
                <table class="table table-sm table-hover table-striped" cellspacing="0" cellpadding="5" width="100%" bgcolor="#F8F8F8">
                  <tr>
                    <td>
                      <pre class="bg-light text-dark mx-4"><samp>
  magick rose: -background skyblue -extent 100x100-15-25 extent.png
</samp></pre>
                    </td>
                  </tr>
                </table>
              </td>
              <td>
                <a href="extent.png"><img src="extent.png" align="middle" vspace="2" hspace="5" border="1" alt="[IM Output]"></a>
              </td>
            </tr>
          </table>This ability to both crop and extend an image according to gravity makes the operator perfect for padding or cropping an image so that it fits into to a specific sized area, for example see <a href="../thumbnails/#pad">Pad/Fill a Thumbnail to Fit</a>. <a name="extent_compose" id="extent_compose"></a> Note that "<code><a href="../option_link.cgi?extent">-extent</a></code>" works by using the same 'overlay' technique that both the <a href="#border">Border</a> and <a href="#frame">Frame</a> operators uses. As such by default using it with an image containing transparency will replace the transparency with the current "<code><a href="../option_link.cgi?background">-background</a></code>" color.
          <table border="0" cellspacing="0" cellpadding="0" width="100%">
            <tr>
              <td width="100%" align="justify">
                <table class="table table-sm table-hover table-striped" cellspacing="0" cellpadding="5" width="100%" bgcolor="#F8F8F8">
                  <tr>
                    <td>
                      <pre class="bg-light text-dark mx-4"><samp>
  magick star.gif  -background LimeGreen  -extent 80x80-10-10  star_extent.gif
</samp></pre>
                    </td>
                  </tr>
                </table>
              </td>
              <td>
                <a href="star_extent.gif"><img src="star_extent.gif" width="80" height="80" align="middle" vspace="5" hspace="2" border="1" alt="[IM Output]"></a>
              </td>
            </tr>
          </table>Again the solution to this is to either set an appropriate "<code><a href="../option_link.cgi?compose">-compose</a></code>" method, or set the "<code><a href="../option_link.cgi?background">-background</a></code>" color to '<code>None</code>'.
          <hr>
          <!-- ---------------------------------------------------------------- -->
          <a name="splice" id="splice"></a>
          <h2>Adding/Removing Rows, Columns and Edges</h2><a name="splice" id="splice"></a>
          <h3>Splice, adding rows, columns and edges</h3>The "<code><a href="../option_link.cgi?splice">-splice</a></code>" operator is new to IM version 6, see <a href="../misc/#splice">Splice, example of the creation of a new image operator</a>. It basically provides the much needed ability to add a row, column of space into the middle or one edge of an image. The color for the space inserted comes from the "<code><a href="../option_link.cgi?background">-background</a></code>" color setting.
          <div align="center">
            <table class="table table-sm table-hover table-striped" cellspacing="0" cellpadding="5" width="90%" bgcolor="#F8F8F8">
              <tr>
                <td>
                  <pre class="bg-light text-dark mx-4"><samp>
  magick rose: -background blue  -splice 20x10+40+30  splice.gif
  magick rose: -background blue  -splice 20x0+40+0    splice_column.gif
  magick rose: -background blue  -splice 0x10+0+30    splice_row.gif
  magick rose: -background blue  -splice 20x10        splice_topleft.gif
</samp></pre>
                </td>
              </tr>
            </table><a href="rose.gif"><img src="rose.gif" width="70" height="46" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a> <img src="../img_www/right.gif" width="20" height="20" align="middle" alt="==&gt;"> <a href="splice.gif"><img src="splice.gif" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a> <a href="splice_column.gif"><img src="splice_column.gif" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a> <a href="splice_row.gif"><img src="splice_row.gif" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a> <a href="splice_topleft.gif"><img src="splice_topleft.gif" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a>
          </div>
          <table border="0" cellspacing="0" cellpadding="0" width="90%" align="center">
            <tr valign="top">
              <td><img src="../img_www/expert.gif" width="23" height="26"><img src="../img_www/space.gif" width="17" height="16"></td>
              <td align="justify" width="100%">
                <font size="-1"><i>If the background color is not set, IM will attempt to determine this value from the image itself. This means that for some images it may be white (the normal default), on others it may black, or for the GIF format it could be whatever background color was set to when that image was saved.</i></font>
                <p><font size="-1"><i>What this basically means is that if you don't set "<code><a href="../option_link.cgi?background">-background</a></code>" color, its default value depends on the image, and you could get just about anything.</i></font></p>
                <center>
                  <b>Always set "<code><a href="../option_link.cgi?background">-background</a></code>", before using an operator that uses it.</b>
                </center>
              </td>
            </tr>
          </table>Now while adding a row and column to an image is good, the "<code><a href="../option_link.cgi?splice">-splice</a></code>" operator is ideal for adding space to just one edge of an image. Which edge is determined by using the "<code><a href="../option_link.cgi?gravity">-gravity</a></code>" option and the splice geometry setting.
          <div align="center">
            <table class="table table-sm table-hover table-striped" cellspacing="0" cellpadding="5" width="90%" bgcolor="#F8F8F8">
              <tr>
                <td>
                  <pre class="bg-light text-dark mx-4"><samp>
  magick rose: -background blue  -splice 0x10  splice_top.gif
  magick rose: -gravity south \
                 -background blue  -splice 0x10  splice_bottom.gif
  magick rose: -background blue  -splice 20x0  splice_left.gif
  magick rose: -gravity east \
                 -background blue  -splice 20x0  splice_right.gif
  magick rose: -gravity southeast \
                 -background blue  -splice 20x10  splice_botright.gif
</samp></pre>
                </td>
              </tr>
            </table><a href="splice_top.gif"><img src="splice_top.gif" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a> <a href="splice_bottom.gif"><img src="splice_bottom.gif" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a> <a href="splice_left.gif"><img src="splice_left.gif" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a> <a href="splice_right.gif"><img src="splice_right.gif" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a> <a href="splice_botright.gif"><img src="splice_botright.gif" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a>
          </div>One of the most common uses of splice is to add space in which to draw a label. (See <a href="../annotating/#labeling">Labeling Images</a>)
          <table border="0" cellspacing="0" cellpadding="0" width="100%">
            <tr>
              <td width="100%" align="justify">
                <table class="table table-sm table-hover table-striped" cellspacing="0" cellpadding="5" width="100%" bgcolor="#F8F8F8">
                  <tr>
                    <td>
                      <pre class="bg-light text-dark mx-4"><samp>
  magick rose: -gravity South  -background LimeGreen  -splice 0x15 \
           -annotate 0x0 'Rose'    splice_label.gif
</samp></pre>
                    </td>
                  </tr>
                </table>
              </td>
              <td>
                <a href="splice_label.gif"><img src="splice_label.gif" align="middle" vspace="5" hspace="5" border="1" alt="[IM Output]"></a>
              </td>
            </tr>
          </table><a name="chop" id="chop"></a>
          <h3>Chop, removing rows, columns and edges</h3>The natural inverse of "<code><a href="../option_link.cgi?splice">-splice</a></code>" is the much older "<code><a href="../option_link.cgi?chop">-chop</a></code>" operator. Given the same argument as "<code><a href="../option_link.cgi?splice">-splice</a></code>" and the same "<code><a href="../option_link.cgi?gravity">-gravity</a></code>" setting, "<code><a href="../option_link.cgi?chop">-chop</a></code>" will restore the image to its original form.
          <div align="center">
            <table class="table table-sm table-hover table-striped" cellspacing="0" cellpadding="5" width="90%" bgcolor="#F8F8F8">
              <tr>
                <td>
                  <pre class="bg-light text-dark mx-4"><samp>
  magick splice.gif       -chop  20x10+40+30   splice_chop.gif
  magick splice_chop.gif  -chop  20x10+30+20   chop.gif
  magick chop.gif -background grey \
                           -splice 20x10+30+20   chop_splice.gif
</samp></pre>
                </td>
              </tr>
            </table><a href="splice.gif"><img src="splice.gif" align="middle" vspace="5" hspace="5" border="1" alt="[IM Output]"></a> <img src="../img_www/right.gif" width="20" height="20" align="middle" alt="==&gt;"> <a href="splice_chop.gif"><img src="splice_chop.gif" align="middle" vspace="5" hspace="5" border="1" alt="[IM Output]"></a> <img src="../img_www/right.gif" width="20" height="20" align="middle" alt="==&gt;"> <a href="chop.gif"><img src="chop.gif" align="middle" vspace="5" hspace="5" border="1" alt="[IM Output]"></a> <img src="../img_www/right.gif" width="20" height="20" align="middle" alt="==&gt;"> <a href="chop_splice.gif"><img src="chop_splice.gif" align="middle" vspace="5" hspace="5" border="1" alt="[IM Output]"></a>
          </div>I continued processing the last example to show how you can reverse the order of the "<code><a href="../option_link.cgi?splice">-splice</a></code>" and "<code><a href="../option_link.cgi?chop">-chop</a></code>" so as to 'clear' a row or column (or both) from the middle of an image without using draws or overlays. Chop is more commonly used to cut of a single edge from an image, using gravity to select that edge. For example...
          <div align="center">
            <table class="table table-sm table-hover table-striped" cellspacing="0" cellpadding="5" width="90%" bgcolor="#F8F8F8">
              <tr>
                <td>
                  <pre class="bg-light text-dark mx-4"><samp>
  magick frame_red.gif                 -chop  0x10  chop_top.gif
  magick frame_red.gif                 -chop 10x0   chop_left.gif
  magick frame_red.gif -gravity East   -chop 10x0   chop_right.gif
  magick frame_red.gif -gravity South  -chop  0x10  chop_bottom.gif
</samp></pre>
                </td>
              </tr>
            </table><a href="frame_red.gif"><img src="frame_red.gif" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a> <img src="../img_www/right.gif" width="20" height="20" align="middle" alt="==&gt;"> <a href="chop_top.gif"><img src="chop_top.gif" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a> <a href="chop_left.gif"><img src="chop_left.gif" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a> <a href="chop_right.gif"><img src="chop_right.gif" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a> <a href="chop_bottom.gif"><img src="chop_bottom.gif" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a>
          </div>As an alternative to using "<code><a href="../option_link.cgi?chop">-chop</a></code>" for removing a single edge, you can in fact use the more universal "<code><a href="../option_link.cgi?crop">-crop</a></code>" operator instead. This does not require the use of "<code><a href="../option_link.cgi?gravity">-gravity</a></code>" to get the bottom or right edges, however does require you to "<code><a href="../option_link.cgi?repage">+repage</a></code>" the canvas of the image afterward.
          <div align="center">
            <table class="table table-sm table-hover table-striped" cellspacing="0" cellpadding="5" width="90%" bgcolor="#F8F8F8">
              <tr>
                <td>
                  <pre class="bg-light text-dark mx-4"><samp>
  magick frame_red.gif  -crop +0+10 +repage  crop_edge_top.gif
  magick frame_red.gif  -crop +10+0 +repage  crop_edge_left.gif
  magick frame_red.gif  -crop -10+0 +repage  crop_edge_right.gif
  magick frame_red.gif  -crop +0-10 +repage  crop_edge_bottom.gif
</samp></pre>
                </td>
              </tr>
            </table><a href="frame_red.gif"><img src="frame_red.gif" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a> <img src="../img_www/right.gif" width="20" height="20" align="middle" alt="==&gt;"> <a href="crop_edge_top.gif"><img src="crop_edge_top.gif" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a> <a href="crop_edge_left.gif"><img src="crop_edge_left.gif" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a> <a href="crop_edge_right.gif"><img src="crop_edge_right.gif" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a> <a href="crop_edge_bottom.gif"><img src="crop_edge_bottom.gif" align="middle" vspace="5" hspace="15" border="1" alt="[IM Output]"></a>
          </div>This relies on the fact that if "<code><a href="../option_link.cgi?crop">-crop</a></code>" is not given an image area to remove, it will default to the size of the image canvas (not the actual image but the images virtual canvas). This means you can (for simple images) remove image edges by just offsetting the crop area being cut. The method of using "<code><a href="../option_link.cgi?crop">-crop</a></code>" to 'chop' image edges, was discovered and published by Don Sheythe, and after some discussion was deemed to be a 'feature' of IM, and thus included here.
          <hr>
          <!-- ---------------------------------------------------------------- -->
          <a name="advanced" id="advanced"></a>
          <h2>Advanced Cropping Techniques</h2><a name="crop_aspect" id="crop_aspect"></a>
          <h3>Crop to a Given Aspect Ratio</h3>You can crop images to fit a specific aspect ratio, but it is tricky and uses some DIY mathematical techniques. For example you can write a script to do the calculations and then do the <a href="#crop">Crop</a>. Or in IM v6 you can so calaculations with the <a href="../distorts/#distort_viewport">Distort Viewport</a>, to extract the desired part of the image during a <a href="../distorts/#distort_noop">No-Op Distortion</a>, as described in <a href="../distorts/#centered_square">Centered Square Crop</a>. However in ImageMagick version 7, you can now do mathematical calculations directly in commands like "<code><a href="../option_link.cgi?crop">-crop</a></code>" and "<code><a href="../option_link.cgi?extent">-extent</a></code>", thus by-passing the need miss-use "<code><a href="../option_link.cgi?distort">-distort</a></code>". This is discussed in detail in the IM Developers Forum <a href="../forum_link.cgi?t=33448">Crop to Aspect Ratio</a>.
          <hr>
          <!-- ---------------------------------------------------------------- -->
          <a name="trim" id="trim"></a>
          <h2>Trim, the 'Auto-Crop' Operator</h2>The "<code><a href="../option_link.cgi?trim">-trim</a></code>" operator is a very close relation to the highly versatile "<code><a href="../option_link.cgi?crop">-crop</a></code>" operator discussed <a href="#crop">above</a>. However instead of supplying an argument, this operator attempts to remove any borders or edges of an image which did does not change in color or transparency. In other words it removes the 'boring' bits surrounding an image.
          <table border="0" cellspacing="0" cellpadding="0" width="90%" align="center">
            <tr valign="top">
              <td><img src="../img_www/warning.gif" width="28" height="28"><img src="../img_www/space.gif" width="12" height="16"></td>
              <td align="justify" width="100%">
                <font size="-1"><i>Note that in ImageMagick version 5 and before, an auto-crop operation was achieved by using a '<code>0x0</code>' argument to the "<code><a href="../option_link.cgi?crop">-crop</a></code>" operator. This is no longer the case, as 'zero' size arguments in crop now denote 'infinite' or 'to the limit of the image size'.</i></font>
                <p><font size="-1"><i>As such a '<code>0x0</code>' argument to crop now effectively means to crop the image into tiles, the size of the original image canvas. In other words, with IM v6, the result will be the same as the original image, or a 'no-op'.</i></font></p>
              </td>
            </tr>
          </table>
          <table border="0" cellspacing="0" cellpadding="0" width="100%">
            <tr valign="top">
              <td width="100%" align="justify">
                For example, here we take the IM logo, which we resize, and 'trim' or 'auto-crop' all the surrounding extra space in the logo.
                <table class="table table-sm table-hover table-striped" cellspacing="0" cellpadding="5" width="100%" bgcolor="#F8F8F8">
                  <tr>
                    <td>
                      <pre class="bg-light text-dark mx-4"><samp>
    magick logo: -resize 30%    -trim     trim.gif
</samp></pre>
                    </td>
                  </tr>
                </table>Two things should be noted from the above. First is like "<code><a href="../option_link.cgi?crop">-crop</a></code>", "<code><a href="../option_link.cgi?trim">-trim</a></code>" will retain the canvas size of the image. This means that the numerical arguments of the trim can be extracted, to allow for further processing, or adjustment of the of the image processing (see <a href="#trim_blur">Trimming "Noisy" Images</a> for an example of doing this).
              </td>
              <td>
                <a href="trim.gif"><img src="trim.gif" align="middle" vspace="0" hspace="5" border="1" alt="[IM Output]"></a>
              </td>
            </tr>
          </table>Here we trim the image, but only to list the result on what part of the image was trimmed, not the actual trimmed image.
          <div align="center">
            <table class="table table-sm table-hover table-striped" cellspacing="0" cellpadding="5" width="90%" bgcolor="#F8F8F8">
              <tr>
                <td>
                  <pre><code execute="" noimage="" out="trim_info.txt">
  magick logo: -resize 30%   -trim  info:-
</code></pre>
                </td>
              </tr>
            </table>
            <table border="0" cellspacing="0" cellpadding="5" width="90%" bgcolor="#F8F8F8">
              <tr>
                <td>
                  <a href="trim_info.txt"><img src="trim_info.txt.gif" align="middle" vspace="0" hspace="0" border="0" alt="[IM Text]"></a>
                </td>
              </tr>
            </table>
          </div>
          <table border="0" cellspacing="0" cellpadding="0" width="100%">
            <tr valign="top">
              <td width="100%" align="justify">
                However if you don't care about this information, just junk it by resetting the page information of the image either using a "<code><a href="../option_link.cgi?repage">+repage</a></code>" operator, or saving to a format that does not save canvas information (such as the JPEG format). Here we do both, to make it clear, that we are junking the canvas information.
                <table class="table table-sm table-hover table-striped" cellspacing="0" cellpadding="5" width="100%" bgcolor="#F8F8F8">
                  <tr>
                    <td>
                      <pre class="bg-light text-dark mx-4"><samp>
  magick logo: -resize 30%    -trim +repage    trim_repage.jpg
</samp></pre>
                    </td>
                  </tr>
                </table>
              </td>
              <td>
                <a href="trim_repage.jpg"><img src="trim_repage.jpg" align="middle" vspace="0" hspace="5" border="1" alt="[IM Output]"></a>
              </td>
            </tr>
          </table>The second thing to note, is that trim did not actually trim right up to the very edge of the final image. This is especially noticeable in the lower right corner of the logo image, where we can see a distinct gap between the foot and its shadow and the trimmed edge. In this corner, the colors here became numerically different to the background color of the image. So even though we can't see any real change in the image, the "<code><a href="../option_link.cgi?trim">-trim</a></code>" operator sees a minor color change, so it did not trim as close to the image as we would have expected. If the image is all one color, then "<code><a href="../option_link.cgi?trim">-trim</a></code>" will trim the image down to a minimal single pixel transparent <a href="#crop_missed">Missed Image</a>. This is logical and prevents more serious problems if the image was left as is. <a name="trim_color" id="trim_color"></a>
          <h3>Trimming with a Specific Color</h3>One of the most worrisome problems with "<code><a href="../option_link.cgi?trim">-trim</a></code>", especially in automated image processing scripts, is that trim can be a little unpredictable. It does not for example limit itself to just a specific color, or even one color. As such you should easily trim much more than you expect. For example lets do a simple trim of a simple image of striped colors.
          <div align="center">
            <table class="table table-sm table-hover table-striped" cellspacing="0" cellpadding="5" width="90%" bgcolor="#F8F8F8">
              <tr>
                <td>
                  <pre class="bg-light text-dark mx-4"><samp>
  magick -size 32x32 xc:red xc:green xc:blue +append stripes.gif
  magick stripes.gif  -trim +repage   stripes_trimmed.gif
</samp></pre>
                </td>
              </tr>
            </table>As you can see, "<code><a href="../option_link.cgi?trim">-trim</a></code>" trimmed not just one color but two colors! In an automatic script, this can be very bad and produce unexpected results. If you know what color you want to trim from an image, then the better way is to add a small one pixel wide "<code><a href="../option_link.cgi?border">-border</a></code>" of that color to the image. Lets take '<code>red</code>' in this case.
            <div align="center">
              <table class="table table-sm table-hover table-striped" cellspacing="0" cellpadding="5" width="90%" bgcolor="#F8F8F8">
                <tr>
                  <td>
                    <pre class="bg-light text-dark mx-4"><samp>
  magick stripes.gif -bordercolor red -border 1x1 \
          -trim +repage   stripes_trim_red.gif
</samp></pre>
                  </td>
                </tr>
              </table>
            </div>Of course using "<code><a href="../option_link.cgi?border">-border</a></code>" like this also will change the canvas offset that "<code><a href="../option_link.cgi?trim">-trim</a></code>" took great pains to preserve. As such if you look at the result without removing the virtual canvas information you can see that image was shifted.
            <table>
              <tr>
                <td>
                  <a href="stripes.gif"><img src="stripes.gif" align="middle" vspace="0" hspace="5" border="1" alt="[IM Output]"></a> <img src="../img_www/right.gif" width="20" height="20" align="middle" alt="==&gt;"> <a href="stripes_trimmed.gif"><img src="stripes_trimmed.gif" align="middle" vspace="5" hspace="5" border="1" alt="[IM Output]"></a>
                </td>
                <td>
                  <a href="stripes.gif"><img src="stripes.gif" align="middle" vspace="0" hspace="5" border="1" alt="[IM Output]"></a> <img src="../img_www/right.gif" width="20" height="20" align="middle" alt="==&gt;"> <a href="stripes_trim_red.gif"><img src="stripes_trim_red.gif" align="middle" vspace="5" hspace="5" border="1" alt="[IM Output]"></a>
                </td>
              </tr>
              <tr>
                <td width="100%" align="justify">
                  <table class="table table-sm table-hover table-striped" cellspacing="0" cellpadding="5" width="100%" bgcolor="#F8F8F8">
                    <tr>
                      <td>
                        <pre class="bg-light text-dark mx-4"><samp>
  magick stripes.gif -bordercolor red -border 1x1  -trim  \
           stripes_trim_red_shifted.gif
</samp></pre>
                      </td>
                    </tr>
                  </table>
                </td>
                <td>
                  <a href="stripes_trim_red_shifted.gif"><img src="stripes_trim_red_shifted.gif" align="middle" vspace="0" hspace="5" border="1" alt="[IM Output]"></a>
                </td>
              </tr>
            </table>So lets try correcting the virtual canvas size (subtract <code><i>border_width</i>x2</code> ) and offset (subtract <code><i>border_width</i></code>)when trimming a specific color.
            <table border="0" cellspacing="0" cellpadding="0" width="100%">
              <tr>
                <td width="100%" align="justify">
                  <table class="table table-sm table-hover table-striped" cellspacing="0" cellpadding="5" width="100%" bgcolor="#F8F8F8">
                    <tr>
                      <td>
                        <pre class="bg-light text-dark mx-4"><samp>
  magick stripes.gif -bordercolor red -border 1x1  -trim  \
           -set page '%[fx:page.width-2]x%[fx:page.height-2]+%[fx:page.x-1]+%[fx:page.y-1]' \
           stripes_trim_red_fix.gif
</samp></pre>
                      </td>
                    </tr>
                  </table>
                </td>
                <td>
                  <a href="stripes_trim_red_fix.gif"><img src="stripes_trim_red_fix.gif" align="middle" vspace="0" hspace="5" border="1" alt="[IM Output]"></a>
                </td>
              </tr>
            </table>Note that I am restoring canvas size and offset of the original image, that <a href="#border">Border Operator</a> enlarged and shifted in the above. The "<code><a href="../option_link.cgi?trim">-trim</a></code>" operation itself preverved the image location correctly. It is as you can see a rather un-wieldly adjustment. Alternatively if you do not care about the canvas size (typical in a layered image) you can use a far simplier <a href="../basics/#page">Relative Repage</a> to only adjusted the image's position on the enlarged canvas.
            <table border="0" cellspacing="0" cellpadding="0" width="100%">
              <tr>
                <td width="100%" align="justify">
                  <table class="table table-sm table-hover table-striped" cellspacing="0" cellpadding="5" width="100%" bgcolor="#F8F8F8">
                    <tr>
                      <td>
                        <pre class="bg-light text-dark mx-4"><samp>
  magick stripes.gif -bordercolor red -border 1x1  -trim  \
           -repage -1-1\! stripes_trim_red_fix2.gif
</samp></pre>
                      </td>
                    </tr>
                  </table>
                </td>
                <td>
                  <a href="stripes_trim_red_fix2.gif"><img src="stripes_trim_red_fix2.gif" align="middle" vspace="0" hspace="5" border="1" alt="[IM Output]"></a>
                </td>
              </tr>
            </table><a name="trim_oneside" id="trim_oneside"></a>
            <h3>Trimming Just One Side of an Image</h3>As you saw above "<code><a href="../option_link.cgi?trim">-trim</a></code>" will trim as many sides as it can. Even going so far as removing two different colors from different sides (or if very carefully arranged, four colours could have been removed). This makes it a little more difficult when you want to restrict the trimming to just one side. To guarantee that we only trim one side we need to add some color stripes to the other side to protect the other three sides. Here is the process step-by-step for trimming just the 'left' or 'west' side of the 'border' image we created previously. I used much thicker stripes than is necessary so you can see them better in this example. Normally a single pixel width is all that is needed.
            <div align="center">
              <table class="table table-sm table-hover table-striped" cellspacing="0" cellpadding="5" width="90%" bgcolor="#F8F8F8">
                <tr>
                  <td>
                    <pre class="bg-light text-dark mx-4"><samp>
  magick border.gif  -gravity East \
                      -background white -splice 5x0 \
                      -background black -splice 5x0  trim_protect.gif
  magick trim_protect.gif     -trim +repage         trim_oneside.gif
  magick trim_oneside.gif  -gravity East -chop 5x0  trim_west.gif
</samp></pre>
                  </td>
                </tr>
              </table>Note that I add stripes two different colors! That way if one of the colors matches the existing border color surrounding the image the other will continue to work to protect those three edges. Also only one of the colors will also be trimmed, leaving just one color stripe to be cleaned up. Here is the whole one side trim as a single command, but for trimming the top edge (stripes are added to the bottom or 'South' edge).
              <table>
                <tr>
                  <td>
                    <a href="border.gif"><img src="border.gif" align="middle" vspace="5" hspace="5" border="1" alt="[IM Output]"></a> <img src="../img_www/right.gif" width="20" height="20" align="middle" alt="==&gt;"> <a href="trim_protect.gif"><img src="trim_protect.gif" align="middle" vspace="5" hspace="5" border="1" alt="[IM Output]"></a> <img src="../img_www/right.gif" width="20" height="20" align="middle" alt="==&gt;"> <a href="trim_oneside.gif"><img src="trim_oneside.gif" align="middle" vspace="5" hspace="5" border="1" alt="[IM Output]"></a> <img src="../img_www/right.gif" width="20" height="20" align="middle" alt="==&gt;"> <a href="trim_west.gif"><img src="trim_west.gif" align="middle" vspace="5" hspace="5" border="1" alt="[IM Output]"></a>
                  </td>
                </tr>
                <tr>
                  <td width="100%" align="justify">
                    <table class="table table-sm table-hover table-striped" cellspacing="0" cellpadding="5" width="100%" bgcolor="#F8F8F8">
                      <tr>
                        <td>
                          <pre class="bg-light text-dark mx-4"><samp>
  magick border.gif -gravity South \
          -background white -splice 0x1  -background black -splice 0x1 \
          -trim  +repage -chop 0x1   trim_north.gif
</samp></pre>
                        </td>
                      </tr>
                    </table>
                  </td>
                  <td>
                    <a href="trim_north.gif"><img src="trim_north.gif" align="middle" vspace="0" hspace="5" border="1" alt="[IM Output]"></a>
                  </td>
                </tr>
              </table>And here is a bottom edge only trim. Of course the "<code><a href="../option_link.cgi?gravity">-gravity</a></code>" settings used in the previous example is not needed and the setting defaults to a '<code>North-West</code>' setting for images.
              <table border="0" cellspacing="0" cellpadding="0" width="100%">
                <tr>
                  <td width="100%" align="justify">
                    <table class="table table-sm table-hover table-striped" cellspacing="0" cellpadding="5" width="100%" bgcolor="#F8F8F8">
                      <tr>
                        <td>
                          <pre class="bg-light text-dark mx-4"><samp>
  magick border.gif \
          -background white -splice 0x1  -background black -splice 0x1 \
          -trim  +repage -chop 0x1   trim_south.gif
</samp></pre>
                        </td>
                      </tr>
                    </table>
                  </td>
                  <td>
                    <a href="trim_south.gif"><img src="trim_south.gif" align="middle" vspace="0" hspace="5" border="1" alt="[IM Output]"></a>
                  </td>
                </tr>
              </table>Of course as before with border, splicing extra colors onto an image will again change the virtual image canvas size and the layer images offset. Again this can be fixed using the same methods we showed in the previous section, but it depends on which side you added the extra colors onto to preserve those edges. <a name="trim_fuzz" id="trim_fuzz"></a>
              <h3>Trimming with fuzzy color selection <font size="-1">-- Low Quality JPEG Images</font></h3>Because JPEG is 'lossy' the colors in the image is generally not a single color but slightly varying band of different colors. because of this "<code><a href="../option_link.cgi?trim">-trim</a></code>" will often fail for JPEG or real world images. <i>FUTURE: Example of failure here</i>As such you need to tell ImageMagick that colors that are not-exactly the same, but are reasonally close should be treated as being the same. Adding a very small "<code><a href="../option_link.cgi?fuzz">-fuzz</a></code>" setting will do this.
              <div align="center">
                <table class="table table-sm table-hover table-striped" cellspacing="0" cellpadding="5" width="90%" bgcolor="#F8F8F8">
                  <tr>
                    <td>
                      <pre class="bg-light text-dark mx-4"><samp>
  magick image.jpg  -fuzz 1% -trim +repage  image_fuzzy_trim.jpg
</samp></pre>
                    </td>
                  </tr>
                </table>
              </div>It is also a very good idea to specify the specific color you want that fuzz to be relative to. This can be added by specifically added a border of that color using the "<code><a href="../option_link.cgi?border">-border</a></code>" operator. The border will of course always match the color to be trimmed, so will always be removed by "<code><a href="../option_link.cgi?trim">-trim</a></code>". <i>FUTURE: Example of fuzzy border trim here</i><a name="trim_noisy" id="trim_noisy"></a> <a name="trim_blur" id="trim_blur"></a>
              <h3>Trimming 'Noisy' Images <font size="-1">-- Scanned Images</font></h3>A similar problem is faced with scanned images, where scanners often produce small single pixel errors, caused by dust, dirt, slight variations in the scanner, or just electronic noise picked up by the reader. The pixels errors however this case is usually too big for a small <a href="../color_basics/#fuzz">fuzz factor</a> to overcome, so different technique is needed to trim such images. The simplest solution, though often least practical is to take multiple scans of the same image, or multiple frames in a still sequence of video), then averaging the results to reduce the interference. However this will not remove dust specks on the scanner or help when only a single image or frame is available, making this method impractical in most cases. A practical solution is a two step one. With a copy of the image, process it in some way to de-emphasize single pixel errors, or scanner dust, while enhancing the effect of large blocks of highly contrasting colors. By then using "<code><a href="../option_link.cgi?trim">-trim</a></code>" on this copy, and examining exactly what it did, you can then "<code><a href="../option_link.cgi?crop">-crop</a></code>" the original unmodified image by the same amount. Their number of methods of de-emphasizing single pixel errors. These include "<code><a href="../option_link.cgi?blur">-blur</a></code>", "<code><a href="../option_link.cgi?median">-median</a></code>", or even using <a href="../#morphology/#basic">Basic Morphology Operators</a> to remove specific details, such a text and thin lines. This the 'blur' method gives two main controls:
              <dl>
                <dd>
                  <ul>
                    <li>The "<code><a href="../option_link.cgi?blur">-blur</a></code>" sigma radius, or the "<code><a href="../option_link.cgi?mediam">-median</a></code>" convolution radius, which determines the size of dust specks you want to ignore. Note that both these values can be a floating point number so you have a fine control over the amount of the blur applied. For more information on blurring see <a href="../blur/#blur">Blurring Images</a>.
                    </li>
                    <li>The second control is the "<code><a href="../option_link.cgi?fuzz">-fuzz</a></code>" color factor that controls the amount of color change matched by the "<code><a href="../option_link.cgi?trim">-trim</a></code>" operator. That is, how close to the desired image you want the trim to get.</li>
                  </ul>
                </dd>
              </dl>
              <table border="0" cellspacing="0" cellpadding="0" width="100%">
                <tr valign="top">
                  <td width="100%" align="justify">
                    For example lets use a smaller "<code>logo:</code>" image.
                    <table class="table table-sm table-hover table-striped" cellspacing="0" cellpadding="5" width="100%" bgcolor="#F8F8F8">
                      <tr>
                        <td>
                          <pre class="bg-light text-dark mx-4"><samp>
  magick logo:   -resize 30%   noisy.jpg
</samp></pre>
                        </td>
                      </tr>
                    </table>In this small image we could regard the stars and title in the image as noise which we want trim to ignore. The stars in the above is about 5 pixels across, so we want to use a value of about double that to get trim to basically ignore them.
                  </td>
                  <td>
                    <a href="noisy.jpg"><img src="noisy.jpg" align="middle" vspace="0" hspace="5" border="1" alt="[IM Output]"></a>
                  </td>
                </tr>
              </table>Here is the result. Note in this case we do not want an image, just the canvas information from the image.
              <div align="center">
                <table class="table table-sm table-hover table-striped" cellspacing="0" cellpadding="5" width="90%" bgcolor="#F8F8F8">
                  <tr>
                    <td>
                      <pre><code execute="" out="blur_trim_info.txt">
  magick noisy.jpg  -virtual-pixel edge -blur 0x15 -fuzz 15% -trim  info:
</code></pre>
                    </td>
                  </tr>
                </table>
                <table border="0" cellspacing="0" cellpadding="5" width="90%" bgcolor="#F8F8F8">
                  <tr>
                    <td>
                      <a href="blur_trim_info.txt"><img src="blur_trim_info.txt.gif" align="middle" vspace="0" hspace="0" border="0" alt="[IM Text]"></a>
                    </td>
                  </tr>
                </table>
              </div>
              <table border="0" cellspacing="0" cellpadding="0" width="90%" align="center">
                <tr valign="top">
                  <td><img src="../img_www/reminder.gif" width="20" height="16"><img src="../img_www/space.gif" width="20" height="16"></td>
                  <td align="justify" width="100%"><font size="-1"><i>You may need to check the <a href="../misc/#virtual">Virtual Pixel</a> setting to enure that you get the right 'edge effects' with the blur.<br>
                  <br>
                  Alternatively you can add a wide border of the same background color to image before blurring and adjusting the offset results appropriately. This may be better for more accurate results from both "<code><a href="../option_link.cgi?blur">-blur</a></code>" and "<code><a href="../option_link.cgi?trim">-trim</a></code>" operators.</i></font></td>
                </tr>
              </table>From the above result we can determine that "<code><a href="../option_link.cgi?trim">-trim</a></code>" had internally used a "<code><a href="../option_link.cgi?crop">-crop</a></code>" argument of '<code>89x121+78+23</code>'. This is the actual size of the trimmed image, and its offset on the virtual canvas, and presumably the location of the major (single) object we are looking for within the image.
              <table border="0" cellspacing="0" cellpadding="0" width="100%">
                <tr valign="top">
                  <td width="100%" align="justify">
                    This can then be used on the original image, which has not been blurred.
                    <table class="table table-sm table-hover table-striped" cellspacing="0" cellpadding="5" width="100%" bgcolor="#F8F8F8">
                      <tr>
                        <td>
                          <pre class="bg-light text-dark mx-4"><samp>
  magick noisy.jpg   -crop 89x121+78+23 +repage   noisy_trimmed.jpg
</samp></pre>
                        </td>
                      </tr>
                    </table>And here we have trimmed our image to just the wizard!
                  </td>
                  <td>
                    <a href="noisy_trimmed.jpg"><img src="noisy_trimmed.jpg" align="middle" vspace="0" hspace="5" border="1" alt="[IM Output]"></a>
                  </td>
                </tr>
              </table>
              <table border="0" cellspacing="0" cellpadding="0" width="100%">
                <tr valign="top">
                  <td width="100%" align="justify">
                    This can be done in a single line, using a little bit of extra 'UNIX shell scripting', and some formating of the results of that first command.
                    <table class="table table-sm table-hover table-striped" cellspacing="0" cellpadding="5" width="100%" bgcolor="#F8F8F8">
                      <tr>
                        <td>
                          <pre class="bg-light text-dark mx-4"><samp>
  magick noisy.jpg -crop \
    `magick noisy.jpg -virtual-pixel edge -blur 0x15 -fuzz 15% \
             -trim -format '%wx%h%O' info:`   +repage   noisy_trimmed_2.jpg
</samp></pre>
                        </td>
                      </tr>
                    </table>See <a href="https://imagemagick.org/script/escape.php">Image Property Escapes</a> for more information on the "<code><a href="../option_link.cgi?format">-format</a></code>" setting used to control the output of "<code><a href="../files/#info">info:</a></code>".
                  </td>
                  <td>
                    <a href="noisy_trimmed_2.jpg"><img src="noisy_trimmed_2.jpg" align="middle" vspace="0" hspace="5" border="1" alt="[IM Output]"></a>
                  </td>
                </tr>
              </table><!--<CODE EXECUTE ASSERT>
  [ `identify -format '%wx%h' noisy_trimmed.jpg` != \
    `identify -format '%wx%h' noisy_trimmed_2.jpg` ] && echo >&2 \
  "ASSERTION FAILURE: Fuzzy trim sizes do not match\!"
</CODE>-->
              <table border="0" cellspacing="0" cellpadding="0" width="90%" align="center">
                <tr valign="top">
                  <td><img src="../img_www/reminder.gif" width="20" height="16"><img src="../img_www/space.gif" width="20" height="16"></td>
                  <td align="justify" width="100%"><font size="-1"><i>The above uses an UNIX command line shell feature for 'command-substitution' method using back-quotes '<code>`...`</code>' to insert the generated "<code><a href="../option_link.cgi?crop">-crop</a></code>" argument into the outer "<code>magick</code>" command.<br>
                  <br>
                  You can do this in a <a href="../api/#windows">Windows Batch Script</a>, using a special <code>FOR..DO</code> construct. Follow the above link for details.</i></font></td>
                </tr>
              </table>Note that while the hand is of the wizard is fully visible, the point of the hat isn't. This is the drawback of this method, it will ignore sharp points and fine details. But then that is what we were asking it to ignore in the first place.
              <table border="0" cellspacing="0" cellpadding="0" width="100%">
                <tr valign="top">
                  <td width="100%" align="justify">
                    The method could be improved by expanding the area trimmed by a small amount (10 pixels in 4 four directions), using some <a href="../transform/#fx_escapes">FX Escape</a> to do the mathematics...
                    <table class="table table-sm table-hover table-striped" cellspacing="0" cellpadding="5" width="100%" bgcolor="#F8F8F8">
                      <tr>
                        <td>
                          <pre class="bg-light text-dark mx-4"><samp>
  magick noisy.jpg -crop \
      `magick noisy.jpg -virtual-pixel edge -blur 0x15 -fuzz 15% -trim \
               -format '%[fx:w+20]x%[fx:h+20]+%[fx:page.x-10]+%[fx:page.y-10]' \
      info:` +repage   noisy_trimmed_3.jpg
</samp></pre>
                        </td>
                      </tr>
                    </table>
                  </td>
                  <td>
                    <a href="noisy_trimmed_3.jpg"><img src="noisy_trimmed_3.jpg" align="middle" vspace="0" hspace="5" border="1" alt="[IM Output]"></a>
                  </td>
                </tr>
              </table>If the calculated bounds expands beyond the original image, the <a href="#crop">crop operator</a> will automatically limit it to the image bounds.
              <table border="0" cellspacing="0" cellpadding="0" width="100%">
                <tr valign="top">
                  <td width="100%" align="justify">
                    In IMv7 (using the "<code>magick</code>" command) you can do it all in one command, saving the calculated trim size in a setting for later use.
                    <table class="table table-sm table-hover table-striped" cellspacing="0" cellpadding="5" width="100%" bgcolor="#F8F8F8">
                      <tr>
                        <td>
                          <pre class="bg-light text-dark mx-4"><samp>
  magick noisy.jpg \
         \( +clone -virtual-pixel edge -blur 0x15 -fuzz 15% -trim \
            -set option:fuzzy_trim \
                     '%[fx:w+20]x%[fx:h+20]+%[fx:page.x-10]+%[fx:page.y-10]'\
            +delete \) \
         -crop %[fuzzy_trim] noisy_trimmed_4.jpg
</samp></pre>
                        </td>
                      </tr>
                    </table>
                  </td>
                  <td>
                    <a href="noisy_trimmed_4.jpg"><img src="noisy_trimmed_4.jpg" align="middle" vspace="0" hspace="5" border="1" alt="[IM Output]"></a>
                  </td>
                </tr>
              </table>Other methods of fuzzy trimming is using various <a href="../morphology/#basic">Morphological Methods</a> to remove the unwanted parts of the image, before triming to find the bounds of the area wanted in the original image. An user <a href="../forum_link.cgi?u=14154">HugoRune</a> needed to trim an image down to a highly different contrast regaion for scanning purposes. See <a href="../forum_link.cgi?t=14247">Discussion on IM Forums</a>, for details.
              <hr>
              <!-- ------------------------------------------------------------------ -->
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>
  <footer class="magick-footer">
    <div class="container-fluid">
      Created: 15 March 2004<br>
      Updated: 9 December 2016<br>
      Author: <a href="https://antofthy.gitlab.io/anthony.html">Anthony Thyssen</a>, &lt;Anthony.Thyssen@gmail.com&gt;<br>
      Examples Generated with: <img src="version.gif" align="absmiddle" alt="[version image]"><br>
      URL: <code>https://imagemagick.org/Usage/crop/</code>
    </div>
  </footer>
</body>
</html>
